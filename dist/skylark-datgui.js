/**
 * skylark-datgui - A version of dat.gui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-datgui/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,o="function"==typeof n&&n.amd,i=!o&&"undefined"!=typeof exports;if(!o&&!n){var s={};n=t.define=function(e,t,n){"function"==typeof n?(s[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),o=e.split("/");n.pop();for(var i=0;i<o.length;i++)"."!=o[i]&&(".."==o[i]?n.pop():n.push(o[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):s[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=s[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-datgui/controllers/Controller",[],function(){"use strict";return class{constructor(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}onChange(e){return this.__onChange=e,this}onFinishChange(e){return this.__onFinishChange=e,this}setValue(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}getValue(){return this.object[this.property]}updateDisplay(){return this}isModified(){return this.initialValue!==this.getValue()}}}),e("skylark-datgui/utils/common",["skylark-langx-types","skylark-langx-arrays","skylark-langx-objects","skylark-langx-funcs"],function(e,t,n,o){"use strict";const i=Array.prototype.forEach,s=Array.prototype.slice,l={BREAK:{},extend:n.extend,defaults:function(e){return this.each(s.call(arguments,1),function(t){const n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){const e=s.call(arguments);return function(){let t=s.call(arguments);for(let n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){let o,i;for(o=0,i=e.length;o<i;o++)if(o in e&&t.call(n,e[o],o)===this.BREAK)return}else for(const o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:o.defer,debounce:function(e,t,n){let o;return function(){const i=this,s=arguments;const l=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,s)},t),l&&e.apply(i,s)}},toArray:t.toArray||t.makeArray,isUndefined:e.isUndefined,isNull:e.isNull,isNaN:e.isNaN,isArray:e.isArray,isObject:e.isPlainObject,isNumber:e.isNumber,isString:e.isString,isBoolean:e.isBoolean,isFunction:e.isFunction};return l}),e("skylark-datgui/dom/dom",["skylark-domx-noder","skylark-domx-styler","skylark-domx-geom","skylark-domx-eventer","../utils/common"],function(e,t,n,o,i){"use strict";const s={};i.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){i.each(e,function(e){s[e]=t})});const l={makeSelectable:e.selectable,makeFullscreen:n.fullCover,fakeEvent:function(e,t,n,o){const l=n||{},r=s[t];if(!r)throw new Error("Event type "+t+" not supported.");const a=document.createEvent(r);switch(r){case"MouseEvents":{const e=l.x||l.clientX||0,n=l.y||l.clientY||0;a.initMouseEvent(t,l.bubbles||!1,l.cancelable||!0,window,l.clickCount||1,0,0,e,n,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{const e=a.initKeyboardEvent||a.initKeyEvent;i.defaults(l,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),e(t,l.bubbles||!1,l.cancelable,window,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.keyCode,l.charCode);break}default:a.initEvent(t,l.bubbles||!1,l.cancelable||!0)}i.defaults(a,o),e.dispatchEvent(a)},bind:o.on,unbind:o.off,addClass:t.addClass,removeClass:t.removeClass,hasClass:t.hasClass,getWidth:n.width,getHeight:n.height,getOffset:n.pagePosition,isActive:e.isActive};return l}),e("skylark-datgui/controllers/BooleanController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}setValue(e){const t=super.setValue(e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t}updateDisplay(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),super.updateDisplay()}}}),e("skylark-datgui/controllers/OptionController",["./Controller","../dom/dom","../utils/common"],function(e,t,n){"use strict";return class extends e{constructor(e,o,i){super(e,o);let s=i;const l=this;if(this.__select=document.createElement("select"),n.isArray(s)){const e={};n.each(s,function(t){e[t]=t}),s=e}n.each(s,function(e,t){const n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),l.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){const e=this.options[this.selectedIndex].value;l.setValue(e)}),this.domElement.appendChild(this.__select)}setValue(e){const t=super.setValue(e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t}updateDisplay(){return t.isActive(this.__select)?this:(this.__select.value=this.getValue(),super.updateDisplay())}}}),e("skylark-datgui/controllers/StringController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const o=this;function i(){o.setValue(o.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),super.updateDisplay()}}}),e("skylark-datgui/controllers/NumberController",["./Controller","../utils/common"],function(e,t){"use strict";function n(e){const t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}return class extends e{constructor(e,o,i){super(e,o);const s=i||{};this.__min=s.min,this.__max=s.max,this.__step=s.step,t.isUndefined(this.__step)?0===this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)}setValue(e){let t=e;return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),super.setValue(t)}min(e){return this.__min=e,this}max(e){return this.__max=e,this}step(e){return this.__step=e,this.__impliedStep=e,this.__precision=n(e),this}}}),e("skylark-datgui/controllers/NumberControllerBox",["./NumberController","../dom/dom","../utils/common"],function(e,t,n){"use strict";return class extends e{constructor(e,o,i){super(e,o,i),this.__truncationSuspended=!1;const s=this;let l;function r(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function a(e){const t=l-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),l=e.clientY}function c(){t.unbind(window,"mousemove",a),t.unbind(window,"mouseup",c),r()}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",function(){const e=parseFloat(s.__input.value);n.isNaN(e)||s.setValue(e)}),t.bind(this.__input,"blur",function(){r()}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",a),t.bind(window,"mouseup",c),l=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,r())}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),super.updateDisplay()}}}),e("skylark-datgui/controllers/NumberControllerSlider",["./NumberController","../dom/dom"],function(e,t){"use strict";function n(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}return class extends e{constructor(e,o,i,s,l){super(e,o,{min:i,max:s,step:l});const r=this;function a(e){e.preventDefault();const t=r.__background.getBoundingClientRect();return r.setValue(n(e.clientX,t.left,t.right,r.__min,r.__max)),!1}function c(){t.unbind(window,"mousemove",a),t.unbind(window,"mouseup",c),r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function d(e){const t=e.touches[0].clientX,o=r.__background.getBoundingClientRect();r.setValue(n(t,o.left,o.right,r.__min,r.__max))}function u(){t.unbind(window,"touchmove",d),t.unbind(window,"touchend",u),r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){document.activeElement.blur(),t.bind(window,"mousemove",a),t.bind(window,"mouseup",c),a(e)}),t.bind(this.__background,"touchstart",function(e){if(1!==e.touches.length)return;t.bind(window,"touchmove",d),t.bind(window,"touchend",u),d(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)}updateDisplay(){const e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",super.updateDisplay()}}}),e("skylark-datgui/controllers/FunctionController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n,o){super(e,n);const i=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,t.bind(this.__button,"click",function(e){return e.preventDefault(),i.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}fire(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}}),e("skylark-datgui/controllers/ColorController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const o=this;function i(){o.setValue(o.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","color"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),super.updateDisplay()}}}),e("skylark-datgui/utils/css",[],function(){"use strict";const e={load:function(e,t){const n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){const n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;const i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(e){}}};return e}),e("skylark-datgui/gui/saveDialogue.html",[],function(){"use strict";return`<div id="dg-save" class="dg dialogue">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`}),e("skylark-datgui/controllers/ControllerFactory",["./OptionController","./NumberControllerBox","./NumberControllerSlider","./StringController","./FunctionController","./BooleanController","../utils/common"],function(e,t,n,o,i,s,l){"use strict";return function(r,a){const c=r[a];if(l.isArray(arguments[2])||l.isObject(arguments[2]))return new e(r,a,arguments[2]);if(l.isNumber(c))return l.isNumber(arguments[2])&&l.isNumber(arguments[3])?l.isNumber(arguments[4])?new n(r,a,arguments[2],arguments[3],arguments[4]):new n(r,a,arguments[2],arguments[3]):l.isNumber(arguments[4])?new t(r,a,{min:arguments[2],max:arguments[3],step:arguments[4]}):new t(r,a,{min:arguments[2],max:arguments[3]});if(l.isString(c))return new o(r,a);if(l.isFunction(c))return new i(r,a,"");if(l.isBoolean(c))return new s(r,a);return null}}),e("skylark-datgui/utils/requestAnimationFrame",[],function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}),e("skylark-datgui/dom/CenteredDiv",["../dom/dom","../utils/common"],function(e,t){"use strict";return class{constructor(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);const n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})}show(){const e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}hide(){const t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}layout(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"}}}),e("skylark-datgui/gui/GUI",["../utils/css","./saveDialogue.html","../controllers/ControllerFactory","../controllers/Controller","../controllers/BooleanController","../controllers/FunctionController","../controllers/NumberControllerBox","../controllers/NumberControllerSlider","../controllers/ColorController","../utils/requestAnimationFrame","../dom/CenteredDiv","../dom/dom","../utils/common"],function(e,t,n,o,i,s,l,r,a,c,d,u,h,_){"use strict";const m="Default",p=function(){try{return!!window.localStorage}catch(e){return!1}}();let f,b,g=!0,y=!1;const C=[],E=function(e){const t=this;let n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),u.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=h.defaults(n,{closeOnTop:!1,autoPlace:!0,width:E.DEFAULT_WIDTH}),n=h.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),h.isUndefined(n.load)?n.load={preset:m}:n.preset&&(n.load.preset=n.preset),h.isUndefined(n.parent)&&n.hideable&&C.push(this),n.resizable=h.isUndefined(n.parent)&&n.resizable,n.autoPlace&&h.isUndefined(n.scrollable)&&(n.scrollable=!0);let o,i,s=p&&"true"===localStorage.getItem(T(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:n.load.preset},set:function(e){t.parent?t.getRoot().preset=e:n.load.preset=e,function(e){for(let t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),t.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,O(t,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,i&&(i.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?u.addClass(t.__ul,E.CLASS_CLOSED):u.removeClass(t.__ul,E.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=e?E.TEXT_OPEN:E.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(e){p&&(s=e,e?u.bind(window,"unload",o):u.unbind(window,"unload",o),localStorage.setItem(T(t,"isLocal"),e))}}}),h.isUndefined(n.parent)){if(this.closed=n.closed||!1,u.addClass(this.domElement,E.CLASS_MAIN),u.makeSelectable(this.domElement,!1),p&&s){t.useLocalStorage=!0;const e=localStorage.getItem(T(this,"gui"));e&&(n.load=JSON.parse(e))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=E.TEXT_CLOSED,u.addClass(this.__closeButton,E.CLASS_CLOSE_BUTTON),n.closeOnTop?(u.addClass(this.__closeButton,E.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(u.addClass(this.__closeButton,E.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),u.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===n.closed&&(n.closed=!0);const e=document.createTextNode(n.name);u.addClass(e,"controller-name"),i=v(t,e);const o=function(e){return e.preventDefault(),t.closed=!t.closed,!1};u.addClass(this.__ul,E.CLASS_CLOSED),u.addClass(i,"title"),u.bind(i,"click",o),n.closed||(this.closed=!1)}n.autoPlace&&(h.isUndefined(n.parent)&&(g&&(b=document.createElement("div"),u.addClass(b,"dg"),u.addClass(b,E.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(b),g=!1),b.appendChild(this.domElement),u.addClass(this.domElement,E.CLASS_AUTO_PLACE)),this.parent||O(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},u.bind(window,"resize",this.__resizeHandler),u.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),u.bind(this.__ul,"transitionend",this.__resizeHandler),u.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function(e){let t;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){u.removeClass(e.__closeButton,E.CLASS_DRAG),u.unbind(window,"mousemove",n),u.unbind(window,"mouseup",o)}function i(i){return i.preventDefault(),t=i.clientX,u.addClass(e.__closeButton,E.CLASS_DRAG),u.bind(window,"mousemove",n),u.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),h.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),u.bind(e.__resize_handle,"mousedown",i),u.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),o=function(){p&&"true"===localStorage.getItem(T(t,"isLocal"))&&localStorage.setItem(T(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=o,n.parent||function(){const e=t.getRoot();e.width+=1,h.defer(function(){e.width-=1})}()};function v(e,t,n){const o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function w(e){u.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&u.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function k(e,t){const n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function S(e,t){const n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){let i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){const i=n.load.remembered;let s;if(i[e.preset])s=i[e.preset];else{if(!i[m])return;s=i[m]}if(s[o]&&void 0!==s[o][t.property]){const e=s[o][t.property];t.initialValue=e,t.setValue(e)}}}}function x(e,t,c,d){if(void 0===t[c])throw new Error(`Object "${t}" has no property "${c}"`);let _;if(d.color)_=new a(t,c);else{const o=[t,c].concat(d.factoryArgs);_=n.apply(e,o)}d.before instanceof o&&(d.before=d.before.__li),S(e,_),u.addClass(_.domElement,"c");const m=document.createElement("span");u.addClass(m,"property-name"),m.innerHTML=_.property;const p=document.createElement("div");p.appendChild(m),p.appendChild(_.domElement);const f=v(e,p,d.before);return u.addClass(f,E.CLASS_CONTROLLER_ROW),_ instanceof a?u.addClass(f,"color"):u.addClass(f,typeof _.getValue()),function(e,t,n){if(n.__li=t,n.__gui=e,h.extend(n,{options:function(t){if(arguments.length>1){const t=n.__li.nextElementSibling;return n.remove(),x(e,n.object,n.property,{before:t,factoryArgs:[h.toArray(arguments)]})}if(h.isArray(t)||h.isObject(t)){const o=n.__li.nextElementSibling;return n.remove(),x(e,n.object,n.property,{before:o,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof r){const e=new l(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});h.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(t){const o=n[t],i=e[t];n[t]=e[t]=function(){const t=Array.prototype.slice.call(arguments);return i.apply(e,t),o.apply(n,t)}}),u.addClass(t,"has-slider"),n.domElement.insertBefore(e.domElement,n.domElement.firstElementChild)}else if(n instanceof l){const t=function(t){if(h.isNumber(n.__min)&&h.isNumber(n.__max)){const t=n.__li.firstElementChild.firstElementChild.innerHTML,o=n.__gui.__listening.indexOf(n)>-1;n.remove();const i=x(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(t),o&&i.listen(),i}return t};n.min=h.compose(t,n.min),n.max=h.compose(t,n.max)}else n instanceof i?(u.bind(t,"click",function(){u.fakeEvent(n.__checkbox,"click")}),u.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof s?(u.bind(t,"click",function(){u.fakeEvent(n.__button,"click")}),u.bind(t,"mouseover",function(){u.addClass(n.__button,"hover")}),u.bind(t,"mouseout",function(){u.removeClass(n.__button,"hover")})):n instanceof a&&(u.addClass(t,"color"),n.updateDisplay=h.compose(function(e){return t.style.borderLeftColor=n.getValue(),e},n.updateDisplay),n.updateDisplay());n.setValue=h.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&k(e.getRoot(),!0),t},n.setValue)}(e,f,_),e.__controllers.push(_),_}function T(e,t){return document.location.href+"."+t}function L(e,t,n){const o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function A(e,t){t.style.display=e.useLocalStorage?"block":"none"}function O(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function D(e,t){const n={};return h.each(e.__rememberedObjects,function(o,i){const s={},l=e.__rememberedObjectIndecesToControllers[i];h.each(l,function(e,n){s[n]=t?e.initialValue:e.getValue()}),n[i]=s}),n}return E.toggleHide=function(){y=!y,h.each(C,function(e){e.domElement.style.display=y?"none":""})},E.CLASS_AUTO_PLACE="a",E.CLASS_AUTO_PLACE_CONTAINER="ac",E.CLASS_MAIN="main",E.CLASS_CONTROLLER_ROW="cr",E.CLASS_TOO_TALL="taller-than-window",E.CLASS_CLOSED="closed",E.CLASS_CLOSE_BUTTON="close-button",E.CLASS_CLOSE_TOP="close-top",E.CLASS_CLOSE_BOTTOM="close-bottom",E.CLASS_DRAG="drag",E.DEFAULT_WIDTH=245,E.TEXT_CLOSED="Close Controls",E.TEXT_OPEN="Open Controls",E._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||E.toggleHide()},u.bind(window,"keydown",E._keydownHandler,!1),h.extend(E.prototype,{add:function(e,t){return x(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return x(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);const t=this;h.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&b.removeChild(this.domElement);const e=this;h.each(this.__folders,function(t){e.removeFolder(t)}),u.unbind(window,"keydown",E._keydownHandler,!1),w(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');const t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);const n=new E(t);this.__folders[e]=n;const o=v(this,n.domElement);return u.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],w(e);const t=this;h.each(e.__folders,function(t){e.removeFolder(t)}),h.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){const e=this.getRoot();if(e.scrollable){const t=u.getOffset(e.__ul).top;let n=0;h.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=u.getHeight(t))}),window.innerHeight-t-20<n?(u.addClass(e.domElement,E.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(u.removeClass(e.domElement,E.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&h.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:h.debounce(function(){this.onResize()},50),remember:function(){if(h.isUndefined(f)&&((f=new d).domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");const e=this;h.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){const t=e.__save_row=document.createElement("li");u.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),u.addClass(t,"save-row");const n=document.createElement("span");n.innerHTML="&nbsp;",u.addClass(n,"button gears");const o=document.createElement("span");o.innerHTML="Save",u.addClass(o,"button"),u.addClass(o,"save");const i=document.createElement("span");i.innerHTML="New",u.addClass(i,"button"),u.addClass(i,"save-as");const s=document.createElement("span");s.innerHTML="Revert",u.addClass(s,"button"),u.addClass(s,"revert");const l=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?h.each(e.load.remembered,function(t,n){L(e,n,n===e.preset)}):L(e,m,!1);if(u.bind(l,"change",function(){for(let t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(l),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(s),p){const t=document.getElementById("dg-local-explain"),n=document.getElementById("dg-local-storage"),o=document.getElementById("dg-save-locally");o.style.display="block","true"===localStorage.getItem(T(e,"isLocal"))&&n.setAttribute("checked","checked"),A(e,t),u.bind(n,"change",function(){e.useLocalStorage=!e.useLocalStorage,A(e,t)})}const r=document.getElementById("dg-new-constructor");u.bind(r,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||f.hide()}),u.bind(n,"click",function(){r.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),f.show(),r.focus(),r.select()}),u.bind(o,"click",function(){e.save()}),u.bind(i,"click",function(){const t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),u.bind(s,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&O(this,this.width)},getRoot:function(){let e=this;for(;e.parent;)e=e.parent;return e},getSaveObject:function(){const e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=D(this)),e.folders={},h.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=D(this),k(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[m]=D(this,!0)),this.load.remembered[e]=D(this),this.preset=e,L(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){h.each(this.__controllers,function(t){this.getRoot().load.remembered?S(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),h.each(this.__folders,function(e){e.revert(e)}),e||k(this.getRoot(),!1)},listen:function(e){const t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&c.call(window,function(){e(t)});h.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){h.each(this.__controllers,function(e){e.updateDisplay()}),h.each(this.__folders,function(e){e.updateDisplay()})}}),E}),e("skylark-datgui/main",["skylark-langx-ns","./controllers/Controller","./controllers/BooleanController","./controllers/OptionController","./controllers/StringController","./controllers/NumberController","./controllers/NumberControllerBox","./controllers/NumberControllerSlider","./controllers/FunctionController","./controllers/ColorController","./dom/dom","./gui/GUI"],function(e,t,n,o,i,s,l,r,a,c,d,u){"use strict";const h={Controller:t,BooleanController:n,OptionController:o,StringController:i,NumberController:s,NumberControllerBox:l,NumberControllerSlider:r,FunctionController:a,ColorController:c},_={dom:d},m={GUI:u},p=u;return e.attach("intg.datgui",{controllers:h,dom:_,gui:m,GUI:p})}),e("skylark-datgui",["skylark-datgui/main"],function(e){return e})}(n),!o){var l=require("skylark-langx-ns");i?module.exports=l:t.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-datgui.js.map
