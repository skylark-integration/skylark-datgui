/**
 * skylark-datgui - A version of dat.gui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-datgui/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,o=!r&&"undefined"!=typeof exports;if(!r&&!n){var s={};n=t.define=function(e,t,n){"function"==typeof n?(s[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):s[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=s[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-ns/_attach",[],function(){return function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var r=t.length,i=e,o=0,s=t[o++];o<r;)i=i[s]=i[s]||{},s=t[o++];return i[s]=n}}),e("skylark-langx-ns/ns",["./_attach"],function(e){var t={attach:function(n,r){return e(t,n,r)}};return t}),e("skylark-langx-ns/main",["./ns"],function(e){return e}),e("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),e("skylark-datgui/controllers/Controller",[],function(){"use strict";return class{constructor(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}onChange(e){return this.__onChange=e,this}onFinishChange(e){return this.__onFinishChange=e,this}setValue(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}getValue(){return this.object[this.property]}updateDisplay(){return this}isModified(){return this.initialValue!==this.getValue()}}}),e("skylark-langx/skylark",["skylark-langx-ns"],function(e){return e}),e("skylark-langx-types/types",["skylark-langx-ns"],function(e){var t,n=Array.isArray,r={}.toString,i=(t={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e){t["[object "+e+"]"]=e.toLowerCase()}),function(e){return null==e?String(e):t[r.call(e)]||"object"}),o=n||function(e){return object&&object.constructor===Array};function s(e){var t;for(t in e)if(null!==e[t])return!1;return!0}function a(e){return"function"==i(e)}function l(e){return e&&e.nodeType}function u(e){return"number"==typeof e}function c(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function f(e){return"string"==typeof e}function d(e){return e&&e==e.window}return e.attach("langx.types",{isArray:o,isArrayLike:function(e){return!f(e)&&!l(e)&&"number"==typeof e.length&&!a(e)},isBoolean:function(e){return!0===e||!1===e||"[object Boolean]"===r.call(e)},isDefined:function(e){return void 0!==e},isDocument:function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},isElement:function(e){return!(!e||1!==e.nodeType)},isEmpty:s,isEmptyObject:s,isFunction:a,isHtmlNode:l,isNaN:function(e){return isNaN(e)},isNull:function(e){return null===e},isNumber:u,isNumeric:u,isObject:c,isPlainObject:function(e){return c(e)&&!d(e)&&Object.getPrototypeOf(e)==Object.prototype},isString:f,isSameOrigin:function(e){if(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e.startsWith(t)}},isSymbol:function(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag},isUndefined:function(e){return void 0===e},isWindow:d,type:i})}),e("skylark-langx-types/main",["./types"],function(e){return e}),e("skylark-langx-types",["skylark-langx-types/main"],function(e){return e}),e("skylark-langx-numbers/numbers",["skylark-langx-ns","skylark-langx-types"],function(e,t){var n=t.isObject,r=t.isSymbol,i=1/0,o=1.7976931348623157e308,s=NaN,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;function d(e){if(!e)return 0===e?e:0;if((e=h(e))===i||e===-i){var t=e<0?-1:1;return t*o}return e==e?e:0}function h(e){if("number"==typeof e)return e;if(r(e))return s;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var i=u.test(e);return i||c.test(e)?f(e.slice(2),i?2:8):l.test(e)?s:+e}return e.attach("langx.numbers",{toFinite:d,toNumber:h,toInteger:function(e){var t=d(e),n=t%1;return t==t?n?t-n:t:0}})}),e("skylark-langx-numbers/main",["./numbers"],function(e){return e}),e("skylark-langx-numbers",["skylark-langx-numbers/main"],function(e){return e}),e("skylark-langx-objects/objects",["skylark-langx-ns/ns","skylark-langx-ns/_attach","skylark-langx-types","skylark-langx-numbers"],function(e,t,n,r){var i,o,s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l=n.isBoolean,u=n.isFunction,c=n.isObject,f=n.isPlainObject,d=n.isArray,h=n.isArrayLike,p=n.isString,m=r.toInteger;var g,y,v="undefined"!=typeof Symbol?Symbol.prototype:null;function k(e){if(!c(e))return[];var t=[];for(var n in e)t.push(n);return t}function _(e,t){if(!d(t))return null!=e&&s.call(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!s.call(e,i))return!1;e=e[i]}return!!n}function b(e,t,n,r){for(var i in t)r&&void 0!==e[i]||(n&&f(t[i])?(f(e[i])||(e[i]={}),b(e[i],t[i],n,r)):void 0!==t[i]&&(e[i]=t[i]));return e}function x(e){var t=a.call(arguments,0),n=t.shift(),r=!1;return l(t[t.length-1])&&(r=t.pop()),{target:n,sources:t,deep:r}}function w(){var e=x.apply(this,arguments);return e.sources.forEach(function(t){b(e.target,t,e.deep,!1)}),e.target}function C(e){for(var t=k(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}return i=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&o(e,t,n,r)},o=function(e,t,n,r){var o=toString.call(e);if(o!==toString.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return v.valueOf.call(e)===v.valueOf.call(t)}var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,l=t.constructor;if(a!==l&&!(u(a)&&a instanceof a&&u(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!i(e[c],t[c],n,r))return!1}else{var f,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(f=d[c],void 0===t[f]||!i(e[f],t[f],n,r))return!1}return n.pop(),r.pop(),!0},e.attach("langx.objects",{allKeys:k,attach:t,clone:function e(t,n){var r;if(void 0===t||null===t)r=t;else if(n&&t.clone)r=t.clone();else if(d(t)){r=[];for(var i=0;i<t.length;i++)r.push(e(t[i]))}else if(f(t))for(var o in r={},t)r[o]=e(t[o]);else r=t;return r},defaults:(g=k,y=!0,function(e){var t=arguments.length;if(y&&(e=Object(e)),t<2||null==e)return e;for(var n=1;n<t;n++)for(var r=arguments[n],i=g(r),o=i.length,s=0;s<o;s++){var a=i[s];y&&void 0!==e[a]||(e[a]=r[a])}return e}),each:function(e,t,n){var r,i,o,s;if(e)if(void 0===(r=e.length)){for(i in e)if(e.hasOwnProperty(i)&&(s=e[i],!1===(n?t.call(s,s,i):t.call(s,i,s))))break}else for(o=0;o<r&&(s=e[o],!1!==(n?t.call(s,s,o):t.call(s,o,s)));o++);return this},extend:function(e){var t,n=a.call(arguments,1);"boolean"==typeof e&&(t=e,e=n.shift());0==n.length&&(n=[e],e=this);return n.forEach(function(n){w(e,n,t)}),e},has:_,isEqual:function(e,t){return i(e,t)},includes:function(e,t,n,r){e=h(e)?e:C(e),n=n&&!r?m(n):0;var i=e.length;n<0&&(n=nativeMax(i+n,0));return p(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&baseIndexOf(e,t,n)>-1},isMatch:function(e,t){var n=n(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},keys:function(e){if(c(e))return[];var t=[];for(var n in e)_(e,n)&&t.push(n);return t},mixin:w,omit:function(e,t,n){if(!e)return null;for(var r=w({},e),i=1;i<arguments.length;i++){var o=arguments[i];o in e&&delete r[o]}return r},pick:function(e,t,n){if(!e)return null;for(var r={},i=1;i<arguments.length;i++){var o=arguments[i];o in e&&(r[o]=e[o])}return r},removeItem:function(e,t){if(d(e)){var n=e.indexOf(t);-1!=n&&e.splice(n,1)}else if(f(e))for(var r in e)if(e[r]==t){delete e[r];break}return this},result:function(e,t,n){d(t)||(t=t.split("."));var r=t.length;if(!r)return u(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=u(o)?o.call(e):o}return e},safeMixin:function(){var e=x.apply(this,arguments);return e.sources.forEach(function(t){b(e.target,t,e.deep,!0)}),e.target},values:C})}),e("skylark-langx-objects/main",["./objects"],function(e){return e}),e("skylark-langx-objects",["skylark-langx-objects/main"],function(e){return e}),e("skylark-langx-arrays/arrays",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects"],function(e,t,n){var r=Array.prototype.filter,i=Array.prototype.find,o=t.isArrayLike;function s(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function a(e){return e!=e}function l(e){if(o(e)){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(o(r))for(var i=0;i<r.length;i++)t.push(r[i]);else t.push(r)}return t}return e}return e.attach("langx.arrays",{baseFindIndex:s,baseIndexOf:function(e,t,n){if(t!=t)return s(e,a,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1},compact:function(e){return r.call(e,function(e){return null!=e})},first:function(e,t){return t?e.slice(0,t):e[0]},filter:function(e,t){return r.call(e,t)},find:function(e,t){return i.call(e,t)},flatten:l,grep:function(e,t){var r=[];return n.each(e,function(e,n){t(n,e)&&r.push(n)}),r},inArray:function(e,t){if(!t)return-1;var n;if(t.indexOf)return t.indexOf(e);n=t.length;for(;n--;)if(t[n]===e)return n;return-1},makeArray:function(e,t,n){if(o(e))return(n||[]).concat(Array.prototype.slice.call(e,t||0));return[e]},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},forEach:function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)},map:function(e,t){var n,r,i,s=[];if(o(e))for(r=0;r<e.length;r++)null!=(n=t.call(e[r],e[r],r))&&s.push(n);else for(i in e)null!=(n=t.call(e[i],e[i],i))&&s.push(n);return l(s)},reduce:function(e,t,n){return Array.prototype.reduce.call(e,t,n)},uniq:function(e){return r.call(e,function(t,n){return e.indexOf(t)==n})}})}),e("skylark-langx-arrays/main",["./arrays"],function(e){return e}),e("skylark-langx-arrays",["skylark-langx-arrays/main"],function(e){return e}),e("skylark-langx/arrays",["skylark-langx-arrays"],function(e){return e}),e("skylark-langx-klass/klass",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays"],function(e,t,n,r){var i=r.uniq,o=n.has,s=n.mixin,a=t.isArray,l=t.isDefined;var u=function(){function e(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function n(r,u,c,f){a(u)&&(f=c,c=u,u=null),u=u||Object,l(c)&&!a(c)&&(f=c,c=!1);var d=u;c&&(c=function(e,t){var n=[];return t.forEach(function(e){if(o(e,"__mixins__"))throw new Error("nested mixins");for(var t=[];e;)t.unshift(e),e=e.superclass;n=n.concat(t)}),(n=(n=i(n)).filter(function(t){for(var n=e;n;){if(t===n)return!1;if(o(n,"__mixins__"))for(var r=n.__mixins__,i=0;i<r.length;i++)if(r[i]===t)return!1;n=n.superclass}return!0})).length>0&&n}(d,c)),c&&(d=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=new Function;i.prototype=Object.create(n.prototype),i.__proto__=n,i.superclass=null,s(i.prototype,t[r].prototype),i.prototype.__mixin__=t[r],n=i}return n}(d,c));var h=r.klassName||"",p=new Function("return function "+h+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.superclass=u,p.__proto__=d,p._constructor||(p._constructor=e),c&&(p.__mixins__=c),p.partial||(p.partial=function(e,n){return function(e,n,r){var i=e.prototype,o=e.superclass.prototype,s=r&&r.noOverrided;r&&r.overrides;for(var a in n)if("constructor"!==a){var l=n[a];"function"==typeof n[a]?i[a]=l._constructor||s||"function"!=typeof o[a]?l:function(e,t,n){return function(){var e=this.overrided;this.overrided=n;var r=t.apply(this,arguments);return this.overrided=e,r}}(0,l,o[a]):t.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(i,a,l):i[a]=l}return e}(this,e,n)}),p.inherit||(p.inherit=function(e,t,r){return n(e,this,t,r)}),p.partial(r,f),p}}();return e.attach("langx.klass",u)}),e("skylark-langx-klass/main",["./klass"],function(e){return e}),e("skylark-langx-klass",["skylark-langx-klass/main"],function(e){return e}),e("skylark-langx/klass",["skylark-langx-klass"],function(e){return e}),e("skylark-langx/ArrayStore",["./klass"],function(e){var t=function(e){if(!e)return e;var n=!!e.then;function r(r){e[r]=function(){var i=arguments,o=Deferred.when(e,function(e){return t(Array.prototype[r].apply(e,i))});if("forEach"!==r||n)return o}}return n&&(e=Object.delegate(e)),r("forEach"),r("filter"),r("map"),null==e.total&&(e.total=Deferred.when(e,function(e){return e.length})),e},n=e({klassName:"ArrayStore",queryEngine:function(e,t){switch(typeof e){default:throw new Error("Can not query with a "+typeof e);case"object":case"undefined":var n=e;e=function(e){for(var t in n){var r=n[t];if(r&&r.test){if(!r.test(e[t],e))return!1}else if(r!=e[t])return!1}return!0};break;case"string":if(!this[e])throw new Error("No filter function "+e+" was found in store");e=this[e];case"function":}function r(n){var r=function(e,t,n){var r,i=0,o=e&&e.length||0,s=[];o&&"string"==typeof e&&(e=e.split(""));"string"==typeof t&&(t=cache[t]||buildFn(t));if(n)for(;i<o;++i)r=e[i],t.call(n,r,i,e)&&s.push(r);else for(;i<o;++i)r=e[i],t(r,i,e)&&s.push(r);return s}(n,e),i=t&&t.sort;if(i&&r.sort("function"==typeof i?i:function(e,t){for(var n,r=0;n=i[r];r++){var o=e[n.attribute],s=t[n.attribute];if(o=null!=o?o.valueOf():o,s=null!=s?s.valueOf():s,o!=s)return!!n.descending==(null==o||o>s)?-1:1}return 0}),t&&(t.start||t.count)){var o=r.length;(r=r.slice(t.start||0,(t.start||0)+(t.count||1/0))).total=o}return r}return r.matches=e,r},idProperty:"id",get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,t){var n=this.data,r=this.index,i=this.idProperty,o=e[i]=t&&"id"in t?t.id:i in e?e[i]:Math.random();if(o in r){if(t&&!1===t.overwrite)throw new Error("Object already exists");n[r[o]]=e}else r[o]=n.push(e)-1;return o},add:function(e,t){return(t=t||{}).overwrite=!1,this.put(e,t)},remove:function(e){var t=this.index,n=this.data;if(e in t)return n.splice(t[e],1),this.setData(n),!0},query:function(e,n){return t(this.queryEngine(e,n)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier||this.idProperty,e=this.data=e.items):this.data=e,this.index={};for(var t=0,n=e.length;t<n;t++)this.index[e[t][this.idProperty]]=t},init:function(e){for(var t in e)this[t]=e[t];this.setData(this.data||[])}});return n}),e("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(e){var t,n=0;function r(e){return function(r,i,o,s){var a,l=r[i];l&&l.target==r||(r[i]=a=function(){for(var e=n,r=arguments,i=a.before;i;)r=i.advice.apply(this,r)||r,i=i.next;if(a.around)var o=a.around.advice(this,r);for(var s=a.after;s&&s.id<e;){if(s.receiveArguments){var l=s.advice.apply(this,r);o=l===t?o:l}else o=s.advice.call(this,o,r);s=s.next}return o},l&&(a.around={advice:function(e,t){return l.apply(e,t)}}),a.target=r);var u=function(e,t,r,i){var o,s=e[t],a="around"==t;if(a){var l=r(function(){return s.advice(this,arguments)});o={remove:function(){l&&(l=e=r=null)},advice:function(e,t){return l?l.apply(e,t):s.advice(e,t)}}}else o={remove:function(){if(o.advice){var n=o.previous,i=o.next;i||n?(n?n.next=i:e[t]=i,i&&(i.previous=n)):delete e[t],e=r=o.advice=null}},id:n++,advice:r,receiveArguments:i};if(s&&!a)if("after"==t){for(;s.next&&(s=s.next););s.next=o,o.previous=s}else"before"==t&&(e[t]=o,o.next=s,s.previous=o);else e[t]=o;return o}(a||l,e,o,s);return o=null,u}}return e.attach("langx.aspect",{after:r("after"),around:r("around"),before:r("before")})}),e("skylark-langx-aspect/main",["./aspect"],function(e){return e}),e("skylark-langx-aspect",["skylark-langx-aspect/main"],function(e){return e}),e("skylark-langx/aspect",["skylark-langx-aspect"],function(e){return e}),e("skylark-langx-funcs/funcs",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects"],function(e,t,n){var r=n.mixin,i=Array.prototype.slice,o=t.isFunction,s=t.isString;function a(e,t){var n=2 in arguments&&i.call(arguments,2);if(o(e)){return function(){return e.apply(t,n?n.concat(i.call(arguments)):arguments)}}if(s(t))return n?(n.unshift(e[t],e),a.apply(null,n)):a(e[t],e);throw new TypeError("expected function")}var l=function(){function e(){}return function(t,n){e.prototype=t;var i=new e;return e.prototype=null,n&&r(i,n),i}}(),u={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},c=/(.)^/,f={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\t|\u2028|\u2029/g;return e.attach("langx.funcs",{bind:a,debounce:function(e,t){var n;return function(){var r=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t)}},delegate:l,defer:function(e){requestAnimationFrame?requestAnimationFrame(e):setTimeoutout(e);return this},negate:function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(...t){return!e.apply(this,t)}},noop:function(){},proxy:a,returnTrue:function(){return!0},returnFalse:function(){return!1},templateSettings:u,template:function(e,t,r){var i;r=n.defaults({},r,u);var o=RegExp([(r.escape||c).source,(r.interpolate||c).source,(r.evaluate||c).source].join("|")+"|$","g"),s=0,l="__p+='";e.replace(o,function(t,n,r,i,o){return l+=e.slice(s,o).replace(d,function(e){return"\\"+f[e]}),n&&(l+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(l+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(l+="';\n"+i+"\n__p+='"),s=o+t.length,t}),l+="';\n",r.variable||(l="with(obj||{}){\n"+l+"}\n");l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{i=new Function(r.variable||"obj","_",l)}catch(e){throw e.source=l,e}if(t)return i(t,this);var h=a(function(e){return i.call(this,e,this)},this),p=r.variable||"obj";return h.source="function("+p+"){\n"+l+"}",h}})}),e("skylark-langx-funcs/main",["./funcs"],function(e){return e}),e("skylark-langx-funcs",["skylark-langx-funcs/main"],function(e){return e}),e("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(e,t,n){"use strict";var r=Array.prototype.slice,i=t.proxy,o=e.makeArray,s=n.result,a=n.mixin;a(Promise.prototype,{always:function(e){return this.then(e,e),this},done:function(){for(var e=0;e<arguments.length;e++)this.then(arguments[e]);return this},fail:function(e){return this.catch(e),this}});var l=function(){var e=this;this.promise=u(new Promise(function(t,n){e._resolve=t,e._reject=n}))};function u(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(e){return r=!0,t=!1,e},function(e){throw n=!0,t=!1,e});i.isResolved=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i.state=function(){return r?"resolved":n?"rejected":"pending"};var o=[],s=[];return i.then=function(e,t,n){return n&&this.progress(n),u(Promise.prototype.then.call(this,e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)},t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)}))},i.progress=function(e){return o.forEach(function(t){e(t)}),s.push(e),this},i.pipe=i.then,i.notify=function(e){try{return o.push(e),s.forEach(function(t){return t(e)})}catch(e){this.reject(e)}return this},i}return l.prototype.resolve=function(e){var t=r.call(arguments);return this.resolveWith(null,t)},l.prototype.resolveWith=function(e,t){return(t=t?o(t):[]).__ctx__=e,this._resolve(t),this._resolved=!0,this},l.prototype.notify=function(e){var t=s(this,"promise");return t.notify(e),this},l.prototype.reject=function(e){var t=r.call(arguments);return this.rejectWith(null,t)},l.prototype.rejectWith=function(e,t){return(t=t?o(t):[]).__ctx__=e,this._reject(t),this._rejected=!0,this},l.prototype.isResolved=function(){var e=s(this,"promise");return e.isResolved()},l.prototype.isRejected=function(){var e=s(this,"promise");return e.isRejected()},l.prototype.state=function(){var e=s(this,"promise");return e.state()},l.prototype.then=function(e,t,n){var r=s(this,"promise");return r.then(e,t,n)},l.prototype.progress=function(e){var t=s(this,"promise");return t.progress(e)},l.prototype.catch=function(e){var t=s(this,"promise");return t.catch(e)},l.prototype.always=function(){var e=s(this,"promise");return e.always.apply(e,arguments),this},l.prototype.done=function(){var e=s(this,"promise");return e.done.apply(e,arguments),this},l.prototype.fail=function(e){var t=s(this,"promise");return t.fail(e),this},l.all=function(e){var t=new l;return Promise.all(e).then(t.resolve.bind(t),t.reject.bind(t)),s(t,"promise")},l.first=function(e){return u(Promise.race(e))},l.when=function(e,t,n,r){var o=e&&"function"==typeof e.then,s=o&&e instanceof Promise;if(!o)return arguments.length>1?t?t(e):e:(new l).resolve(e);if(!s){var a=new l(e.cancel);e.then(i(a.resolve,a),i(a.reject,a),a.notify),e=a.promise}return t||n||r?e.then(t,n,r):e},l.reject=function(e){var t=new l;return t.reject(e),t.promise},l.immediate=l.resolve=function(e){var t=new l;return t.resolve.apply(t,arguments),t.promise},l.promise=function(e){var t=new l;return e(t.resolve.bind(t),t.reject.bind(t),t.progress.bind(t)),t.promise},l}),e("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(e,t,n){var r=t.each,i={Deferred:n,parallel:function(e,t,i){var o=[];return i=i||null,t=t||[],r(e,function(e,n){o.push(n.apply(i,t))}),n.all(o)},series:function(e,t,i){var o=[],s=new n,a=s.promise;return i=i||null,t=t||[],s.resolve(),r(e,function(e,n){a=a.then(function(){return n.apply(i,t)}),o.push(a)}),n.all(o)},waterful:function(e,t,i){var o=new n,s=o.promise;return i=i||null,t=t||[],o.resolveWith(i,t),r(e,function(e,t){s=s.then(t)}),s}};return e.attach("langx.async",i)}),e("skylark-langx-async/main",["./async"],function(e){return e}),e("skylark-langx-async",["skylark-langx-async/main"],function(e){return e}),e("skylark-langx/async",["skylark-langx-async"],function(e){return e}),e("skylark-langx-binary/binary",["skylark-langx-ns/ns"],function(e){"use strict";return e.attach("langx.binary",{fromBase64:function(e){for(var t,n,r,i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=e.length/4*3,a=new ArrayBuffer(s),l=new Uint8Array(a),u=0,c=0;u<s;u+=3)t=o.indexOf(e.charAt(c++)),n=o.indexOf(e.charAt(c++)),r=o.indexOf(e.charAt(c++)),i=o.indexOf(e.charAt(c++)),l[u]=t<<2|n>>4,64!==r&&(l[u+1]=(15&n)<<4|r>>2),64!==i&&(l[u+2]=(3&r)<<6|i);return a},fromBinaryString:function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n},fromBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t}})}),e("skylark-langx-binary/main",["./binary"],function(e){return e}),e("skylark-langx-binary",["skylark-langx-binary/main"],function(e){return e}),e("skylark-langx/binary",["skylark-langx-binary"],function(e){return e}),e("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(e){return e.attach("langx.datetimes",{parseMilliSeconds:function(e){var t=e.split(" "),n=parseInt(t[0]);if(isNaN(n))return 0;switch(t[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),e("skylark-langx-datetimes/main",["./datetimes"],function(e){return e}),e("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(e){return e}),e("skylark-langx/datetimes",["skylark-langx-datetimes"],function(e){return e}),e("skylark-langx/Deferred",["skylark-langx-async/Deferred"],function(e){return e}),e("skylark-langx-events/events",["skylark-langx-ns"],function(e){return e.attach("langx.events",{})}),e("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(e){var t={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(t.isNode=!0,t.isBrowser=!1),t.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var n=null;if(Object.defineProperty(t,"document",function(){if(!n){var e="undefined"==typeof window?require("html-element"):window;n=e.document}return n}),void 0===t.global.CustomEvent&&(t.global.CustomEvent=function(e,t){this.type=e,this.props=t}),Object.defineProperty(t,"document",function(){if(!n){var e="undefined"==typeof window?require("html-element"):window;n=e.document}return n}),t.isBrowser){var r=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent),i=t.browser={};r.browser&&(i[r.browser]=!0,i.version=r.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0)}return e.attach("langx.hoster",t)}),e("skylark-langx-hoster/main",["./hoster"],function(e){return e}),e("skylark-langx-hoster",["skylark-langx-hoster/main"],function(e){return e}),e("skylark-langx-events/Event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster"],function(e,t,n){var r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function i(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(r,function(e,r){var o=i[e];n[e]=function(){return this[r]=t.returnTrue,o&&o.apply(i,arguments)},n[r]=t.returnFalse})),n}class o extends CustomEvent{constructor(t,n){super(t,n),e.safeMixin(this,n),i(this)}}return o.compatible=i,o}),e("skylark-langx-events/Listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event"],function(e,t,n,r,i,o){Array.prototype.slice;var s=n.compact,a=(e.isDefined,e.isPlainObject,e.isFunction,e.isBoolean),l=e.isString,u=e.isEmptyObject,c=(t.mixin,t.safeMixin,r({listenTo:function(t,n,r,i){if(!t)return this;if(a(r)&&(i=r,r=null),e.isPlainObject(n)){var o=n;for(var s in o)this.listenTo(t,s,o[s],i);return this}r||(r="handleEvent"),l(r)&&(r=this[r]),i?t.one(n,r,this):t.on(n,r,this);for(var u,c=this._listeningTo||(this._listeningTo=[]),f=0;f<c.length;f++)if(c[f].obj==t){u=c[f];break}u||c.push(u={obj:t,events:{}});var d=u.events,h=d[n]=d[n]||[];return-1==h.indexOf(r)&&h.push(r),this},listenToOnce:function(e,t,n){return this.listenTo(e,t,n,1)},unlistenTo:function(e,t,n){var r=this._listeningTo;if(!r)return this;l(n)&&(n=this[n]);for(var i=0;i<r.length;i++){var o=r[i];if(!e||e==o.obj){var a=o.events;for(var c in a)if(!t||t==c){for(var f=a[c],d=0;d<f.length;d++)n&&n!=f[i]||(o.obj.off(c,f[i],this),f[i]=null);f=a[c]=s(f),u(f)&&(a[c]=null)}u(a)&&(r[i]=null)}}return r=this._listeningTo=s(r),u(r)&&(this._listeningTo=null),this}}));return i.Listener=c}),e("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(e,t,n,r,i,o,s){var a=Array.prototype.slice,l=n.compact,u=e.isDefined,c=e.isPlainObject,f=e.isFunction,d=e.isString,h=(e.isEmptyObject,t.mixin);t.safeMixin;function p(e){var t=(""+e).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var m=s.inherit({on:function(e,t,n,r,i,o){var s=this,a=this._hub||(this._hub={});if(c(e))return i=r,each(e,function(e,r){s.on(e,t,n,r,i,o)}),this;if(d(t)||f(r)||(i=r,r=n,n=t,t=void 0),f(n)&&(i=r,r=n,n=null),!r)throw new Error("No callback function");if(!f(r))throw new Error("The callback  is not afunction");return d(e)&&(e=e.split(/\s/)),e.forEach(function(e){var s=p(e),l=s.name,u=s.ns;(a[l]||(a[l]=[])).push({fn:r,selector:t,data:n,ctx:i,ns:u,one:o})}),this},one:function(e,t,n,r,i){return this.on(e,t,n,r,i,1)},emit:function(e){if(!this._hub)return this;var t=this;d(e)&&(e=new o(e)),Object.defineProperty(e,"target",{value:this});var n=a.call(arguments,1);return n=u(n)?[e].concat(n):[e],[e.type||e.name,"all"].forEach(function(r){var i=p(r),o=i.name,s=i.ns,a=t._hub[o];if(a){for(var u=a.length,c=!1,f=0;f<u;f++){if(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return this;var d=a[f];(!s||d.ns&&d.ns.startsWith(s))&&(e.data?d.data&&(e.data=h({},d.data,e.data)):e.data=d.data||null,d.fn.apply(d.ctx,n),d.one&&(a[f]=null,c=!0))}c&&(t._hub[r]=l(a))}}),this},listened:function(e){var t=(this._hub||(this._events={}))[e]||[];return t.length>0},off:function(e,t){var n=this._hub||(this._hub={});return d(e)&&(e=e.split(/\s/)),e.forEach(function(e){var r=p(e),i=r.name,o=r.ns,s=n[i];if(s){var a=[];if(t||o)for(var l=0,u=s.length;l<u;l++)t&&s[l].fn!==t&&s[l].fn._!==t?a.push(s[l]):!o||s[l].ns&&0==s[l].ns.indexOf(o)||a.push(s[l]);a.length?n[i]=a:delete n[i]}}),this},trigger:function(){return this.emit.apply(this,arguments)}});return i.Emitter=m}),e("skylark-langx/Emitter",["skylark-langx-events/Emitter"],function(e){return e}),e("skylark-langx/Evented",["./Emitter"],function(e){return e}),e("skylark-langx-events/createEvent",["./events","./Event"],function(e,t){return e.createEvent=function(e,n){return new t(e,n)}}),e("skylark-langx-events/main",["./events","./Event","./Listener","./Emitter","./createEvent"],function(e){return e}),e("skylark-langx-events",["skylark-langx-events/main"],function(e){return e}),e("skylark-langx/events",["skylark-langx-events"],function(e){return e}),e("skylark-langx/funcs",["skylark-langx-funcs"],function(e){return e}),e("skylark-langx/hoster",["skylark-langx-hoster"],function(e){return e}),e("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(e,t){for(var n=[],r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*MathUtils.DEG2RAD},radToDeg:function(e){return e*MathUtils.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((t+r)/2),c=s((t+r)/2),f=o((t-r)/2),d=s((t-r)/2),h=o((r-t)/2),p=s((r-t)/2);"XYX"===i?e.set(a*c,l*f,l*d,a*u):"YZY"===i?e.set(l*d,a*c,l*f,a*u):"ZXZ"===i?e.set(l*f,l*d,a*c,a*u):"XZX"===i?e.set(a*c,l*p,l*h,a*u):"YXY"===i?e.set(l*h,a*c,l*p,a*u):"ZYZ"===i?e.set(l*p,l*h,a*c,a*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return e.attach("langx.maths",i)}),e("skylark-langx-maths/main",["./maths"],function(e){return e}),e("skylark-langx-maths",["skylark-langx-maths/main"],function(e){return e}),e("skylark-langx/maths",["skylark-langx-maths"],function(e){return e}),e("skylark-langx/numbers",["skylark-langx-numbers"],function(e){return e}),e("skylark-langx/objects",["skylark-langx-objects"],function(e){return e}),e("skylark-langx-strings/strings",["skylark-langx-ns"],function(e){var t=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function n(e){return t[e]}var r=/[&<>"'`=]/g;var i=0;function o(e,t){var n,r,i,o,s,a,l,u=arguments.callee;return u.cache[e]||(u.cache[e]=(n=e,r=/^[\w\-]+$/.test(e)?u.get(e):(n="template(string)",e),i=1,o=("try { "+(u.variable?"var "+u.variable+" = this.stash;":"with (this.stash) { ")+"this.ret += '"+r.replace(/<%/g,"").replace(/%>/g,"").replace(/'(?![^\x11\x13]+?\x13)/g,"\\x27").replace(/^\s*|\s*$/g,"").replace(/\n|\r\n/g,function(){return"';\nthis.line = "+ ++i+"; this.ret += '\\n"}).replace(/\x11=raw(.+?)\x13/g,"' + ($1) + '").replace(/\x11=(.+?)\x13/g,"' + this.escapeHTML($1) + '").replace(/\x11(.+?)\x13/g,"'; $1; this.ret += '")+"'; "+(u.variable?"":"}")+"return this.ret;} catch (e) { throw 'TemplateError: ' + e + ' (on "+n+"' + ' line ' + this.line + ')'; } //@ sourceURL="+n+"\n").replace(/this\.ret \+= '';/g,""),s=new Function(o),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},l=function(e){return(""+e).replace(/[&<>\'\"]/g,function(e){return a[e]})},function(e){return s.call(u.context={escapeHTML:l,line:1,ret:"",stash:e})})),t?u.cache[e](t):u.cache[e]}return o.cache={},o.get=function(e){return document.getElementById(e).innerHTML},e.attach("langx.strings",{camelCase:function(e){return e.replace(/-([\da-z])/g,function(e){return e.toUpperCase().replace("-","")})},dasherize:function(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?JSON.parse(e):e):e}catch(t){return e}},escapeHTML:function(e){if(null==e)return"";if(!e)return String(e);return e.toString().replace(r,n)},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},ltrim:function(e){return e.replace(/^\s+/,"")},lowerFirst:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},rtrim:function(e){return e.replace(/\s+$/,"")},serializeValue:function(e){return JSON.stringify(e)},substitute:function(e,t,n,r){function i(e,t){if(e.match(/\./)){var n,r=function(e,t){var i=e.pop();return i?t[i]?r(e,n=t[i]):null:n};return r(e.split(".").reverse(),t)}return t[e]}return r=r||window,n=n?proxy(r,n):function(e){return e},e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,o,s){var a=i(o,t);return s&&(a=i(s,r).call(r,a,o)),n(a,o).toString()})},slugify:function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;",n=0,r=t.length;n<r;n++)e=e.replace(new RegExp(t.charAt(n),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(n));return e=e.replace(/\s+/g,"-").replace(/-+/g,"-")},trim:function(e){return null==e?"":String.prototype.trim.call(e)},uniqueId:function(e){var t=++i+"";return e?e+t:t},upperFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}})}),e("skylark-langx-strings/base64",["./strings"],function(e){return e.base64={decode:function(e,t){t=null!=t&&t;var n,r,i,o,s,a,l,u="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;c<e.length;)o=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),l=this._keyStr.indexOf(e.charAt(c++)),n=o<<2|s>>4,r=(15&s)<<4|a>>2,i=(3&a)<<6|l,u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(i));t||(u=function(e){var t="",n=0,r=c1=c2=0;for(;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}(u));return u},encode:function(e,t){var n,r,i,o,s,a,l,u="",c=0;(t=null!=t&&t)||(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e));for(;c<e.length;)n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=e.charCodeAt(c++),o=n>>2,s=(3&n)<<4|r>>4,a=(15&r)<<2|i>>6,l=63&i,isNaN(r)?a=l=64:isNaN(i)&&(l=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(l);return u}}}),e("skylark-langx-strings/main",["./strings","./base64"],function(e){return e}),e("skylark-langx-strings",["skylark-langx-strings/main"],function(e){return e}),e("skylark-langx/strings",["skylark-langx-strings"],function(e){return e}),e("skylark-langx/Stateful",["./Evented","./strings","./objects"],function(e,t,n){var r=n.isEqual,i=n.mixin,o=n.result,s=n.isEmptyObject,a=n.clone,l=t.uniqueId,u=e.inherit({_construct:function(e,t){var n=e||{};t||(t={}),this.cid=l(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var r=o(this,"defaults");n=i({},r,n),this.set(n,t),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(e){return a(this.attributes)},get:function(e){return this.attributes[e]},has:function(e){return null!=this.get(e)},set:function(e,t,n){if(null==e)return this;var i;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var o=n.unset,s=n.silent,l=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=a(this.attributes),this.changed={});var c=this.attributes,f=this.changed,d=this._previousAttributes;for(var h in i)t=i[h],r(c[h],t)||l.push(h),r(d[h],t)?delete f[h]:f[h]=t,o?delete c[h]:c[h]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){l.length&&(this._pending=n);for(var p=0;p<l.length;p++)this.trigger("change:"+l[p],this,c[l[p]],n)}if(u)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s(this.changed):void 0!==this.changed[e]},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&a(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var i in e){var o=e[i];r(t[i],o)||(n[i]=o)}return!s(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i(t,{validationError:n})),!1)}});return u}),e("skylark-langx-emitter/Emitter",["skylark-langx-events/Emitter"],function(e){return e}),e("skylark-langx-emitter/Evented",["./Emitter"],function(e){return e}),e("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-emitter/Evented"],function(e,t){var n=new t;return e.attach("langx.topic",{publish:function(e,t,r){var i=[].slice.call(arguments,1);return n.trigger({type:e,data:i})},subscribe:function(e,t,r){var i=function(e){t.apply(r,e.data)};return n.on(e,i),{remove:function(){n.off(e,i)}}}})}),e("skylark-langx-topic/main",["./topic"],function(e){return e}),e("skylark-langx-topic",["skylark-langx-topic/main"],function(e){return e}),e("skylark-langx/topic",["skylark-langx-topic"],function(e){return e}),e("skylark-langx/types",["skylark-langx-types"],function(e){return e}),e("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./binary","./datetimes","./Deferred","./Emitter","./Evented","./events","./funcs","./hoster","./klass","./maths","./numbers","./objects","./Stateful","./strings","./topic","./types"],function(e,t,n,r,i,o,s,a,l,u,c,f,d,h,p,m,g,y,v,k,_){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var b=g.mixin,x=(g.safeMixin,_.isFunction);var w=1;function C(){return C}return b(C,{createEvent:l.createEvent,funcArg:function(e,t,n,r){return x(t)?t.call(e,n,r):t},getQueryParams:function(e){var t=(e=e||window.location.href).split("?"),n={};t.length>1&&t[1].split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]});return n},toPixel:function(e){return parseFloat(e)||0},uid:function(e){return e._uid||(e._uid=w++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),b(C,t,r,s,f,m,g,v,_,{ArrayStore:n,async:i,Deferred:a,Emitter:l,Evented:u,hoster:d,klass:h,Stateful:y,topic:k}),e.langx=C}),e("skylark-domx-browser/browser",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){"use strict";var n,r,i=t.hoster.browser,o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=null,a="",l="",u={},c={},f=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,d=window.document,h=d.createElement("div"),p=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.matchesSelector,m=h.requestFullscreen||h.webkitRequestFullscreen||h.mozRequestFullScreen||h.msRequestFullscreen,g=(d.exitFullscreen||d.webkitCancelFullScreen||d.mozCancelFullScreen||d.msExitFullscreen,h.style);for(var y in g){var v=y.match(r||f);if(v){r||(n=v[1],r=new RegExp("^("+n+")(.*)$"),n,a="-"+n.toLowerCase()+"-",l=n.toLowerCase()),u[t.lowerFirst(v[2])]=y;var k=t.dasherize(v[2]);c[k]=a+k,o[y]&&(s=o[y])}}return s||void 0!==g.transition&&(s=o.transition),t.mixin(i,{css3PropPrefix:a,isIE:!!/msie/i.exec(window.navigator.userAgent),normalizeStyleProperty:function(e){return u[e]||e},normalizeCssProperty:function(e){return c[e]||e},normalizeCssEvent:function(e){return l?l+e:e.toLowerCase()},matchesSelector:p,requestFullScreen:m,exitFullscreen:m,location:function(){return window.location},support:{}}),s&&(i.support.transition={end:s}),h=null,e.attach("domx.browser",i)}),e("skylark-domx-browser/main",["./browser"],function(e){return e}),e("skylark-domx-browser",["skylark-domx-browser/main"],function(e){return e}),e("skylark-domx-noder/noder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser"],function(e,t,n){var r=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),i=/^\s*<(\w+|!)[^>]*>/,o=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,s=document.createElement("div"),a=document.createElement("table"),l=document.createElement("tbody"),u=document.createElement("tr"),c={tr:l,tbody:a,thead:a,tfoot:a,td:u,th:u,"*":s},f=/^(?:body|html)$/i,d=Array.prototype.map,h=Array.prototype.slice;function p(e,n){return t.isArrayLike(e)||(e=[e]),n&&(e=d.call(e,function(e){return e.cloneNode(!0)})),t.flatten(e)}function m(e,t){var n=e.nodeName&&e.nodeName.toLowerCase();return void 0!==t?n===t.toLowerCase():n}function g(e,n){if(t.isFunction(e))return e.apply(n,[]);if(t.isArrayLike(e)){for(var r,i=0;i<e.length;i++)t.isFunction(e[i])&&(e[i]=e[i].apply(n,[]),t.isArrayLike(e[i])&&(r=!0));r&&(e=t.flatten(e))}return e}function y(e,t,n){t=g(t,e);for(var r=e,i=p(t,n),o=0;o<i.length;o++)r.appendChild(i[o]);return this}function v(e,t,n){var r;if(r=/svg/i.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),t)for(var i in t)r.setAttribute(i,t[i]);return n&&y(n,r),r}var k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;function _(e,t,n){if(n)return e.parentNode===t;if(document.documentElement.contains)return t.contains(e);for(;e;){if(t===e)return!0;e=e.parentNode}return!1}function b(e){return e?9==e.nodeType?e:e.ownerDocument:document}function x(){return x}return t.mixin(x,{active:function(e){var t;e=e||document;try{t=e.activeElement}catch(n){t=e.body}t||(t=e.body);t.nodeName||(t=e.body);return t},after:function(e,t,n){t=g(t,e);var r=(o=e).parentNode;if(r)for(var i=p(t,n),o=o.nextSibling,s=0;s<i.length;s++)o?r.insertBefore(i[s],o):r.appendChild(i[s]);return this},append:y,before:function(e,t,n){t=g(t,e);var r=e,i=r.parentNode;if(i)for(var o=p(t,n),s=0;s<o.length;s++)i.insertBefore(o[s],r);return this},blur:function(e){e.blur()},body:function(){return document.body},clone:function(e,t){var n,i=this;if(!r||1!==e.nodeType||t)return e.cloneNode(t);if(!t)return n=document.createElement(e.nodeName),each(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),n},contains:function(e,t){return _(t,e)},contents:function(e){if(m(e,"iframe"))return e.contentDocument;return e.childNodes},createElement:v,createFragment:function(e){if(e=t.trim(e),o.test(e))return[v(RegExp.$1)];var n=i.test(e)&&RegExp.$1;n in c||(n="*");var r=c[n];return r.innerHTML=function(e){for(var t=e.split("/>"),n="",r=0;r<t.length-1;r++){var i=t[r].split("<");n+=t[r]+"></"+i[i.length-1].split(" ")[0]+">"}return n+t[t.length-1]}(""+e),dom=h.call(r.childNodes),dom.forEach(function(e){r.removeChild(e)}),dom},createTextNode:function(e){return document.createTextNode(e)},doc:function(){return document},empty:function(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}return this},fullScreen:function(e){if(!1===e)n.exitFullScreen.apply(document);else{if(!e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.requestFullScreen.apply(e),e}},focusable:function(e,t){var n,r,i,o,s,a=e.nodeName.toLowerCase();if("area"===a)return n=e.parentNode,r=n.name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&((i=$("img[usemap='#"+r+"']")).length>0&&i.is(":visible"));/^(input|select|textarea|button|object)$/.test(a)?(o=!e.disabled)&&(s=$(e).closest("fieldset")[0])&&(o=!s.disabled):o="a"===a&&e.href||t;return o&&$(e).is(":visible")&&visible($(e))},html:function(e,n){if(void 0===n)return e.innerHTML;if(this.empty(e),n=n||"",t.isString(n)&&(n=n.replace(k,"<$1></$2>")),t.isString(n)||t.isNumber(n))e.innerHTML=n;else if(t.isArrayLike(n))for(var r=0;r<n.length;r++)e.appendChild(n[r]);else e.appendChild(n);return this},isActive:function(e){return e===document.activeElement&&(e.type||e.href)},isChildOf:_,isDocument:function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},isInDocument:function(e){return e===document.body||document.body.contains(e)},isWindow:t.isWindow,nodeName:m,offsetParent:function(e){var t=e.offsetParent||document.body;for(;t&&!f.test(t.nodeName)&&"static"==document.defaultView.getComputedStyle(t).position;)t=t.offsetParent;return t},ownerDoc:b,ownerWindow:function(e){var t=b(e);return t.defaultView||t.parentWindow},prepend:function(e,t,n){for(var r=e,i=r.firstChild,o=p(t,n),s=0;s<o.length;s++)i?r.insertBefore(o[s],i):r.appendChild(o[s]);return this},reflow:function(e){null==el&&(e=document);return e.offsetHeight,this},remove:function(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(e){console.warn("The node is already removed",e)}return this},removeChild:function(e,n){t.isArrayLike(n)||(n=[n]);for(var r=0;r<n.length;r++)e.removeChild(n[r]);return this},replace:function(e,t){return t.parentNode.replaceChild(e,t),this},selectable:function(e,t){if(void 0===e||void 0===e.style)return;e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off"},traverse:function e(t,n){n(t);for(var r=0,i=t.childNodes.length;r<i;r++)e(t.childNodes[r],n);return this},reverse:function(e){for(var t=e.firstChild,n=e.children.length-1;n>0;n--)if(n>0){var r=e.children[n];e.insertBefore(r,t)}},wrapper:function(e,n){t.isString(n)&&(n=this.createFragment(n).firstChild);e.parentNode.insertBefore(n,e),n.appendChild(e)},wrapperInner:function(e,t){var n=h.call(e.childNodes);e.appendChild(t);for(var r=0;r<n.length;r++)t.appendChild(n[r]);return this},unwrap:function(e){var t=e.parentNode;if(t){if(this.isDoc(t.parentNode))return;t.parentNode.insertBefore(e,t)}}}),e.attach("domx.noder",x)}),e("skylark-domx-noder/main",["./noder"],function(e){return e}),e("skylark-domx-noder",["skylark-domx-noder/main"],function(e){return e}),e("skylark-domx-styler/styler",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){Array.prototype.every;var n=Array.prototype.forEach,r=t.camelCase,i=t.dasherize;function o(e,t){return"number"!=typeof t||s[i(e)]?t:t+"px"}var s={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},a={};function l(e){return e in a?a[e]:a[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function u(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;if(void 0===t)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}var c={};function f(e,n){if(!n)return this;var r=u(e);return(t.isString(n)?n.split(/\s+/g):n).forEach(function(e){var t=l(e);r.match(t)||(r+=(r?" ":"")+e)}),u(e,r),this}function d(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)}function h(e,t){var n=l(t);return e.className&&e.className.match(n)}function p(e,n){if(n){var r=u(e);(t.isString(n)?n.split(/\s+/g):n).forEach(function(e){var t=l(e);r.match(t)&&(r=r.replace(t," "))}),u(e,r.trim())}else u(e,"");return this}var m=function(){return m};return t.mixin(m,{autocssfix:!1,cssHooks:{},addClass:f,className:u,css:function(e,s,a){if(arguments.length<3){var l=d(e);if(t.isString(s))return e.style[r(s)]||l.getPropertyValue(i(s));if(t.isArrayLike(s)){var u={};return n.call(s,function(t){u[t]=e.style[r(t)]||l.getPropertyValue(i(t))}),u}}var c="";if("string"==typeof s)a||0===a?c=i(s)+":"+o(s,a):e.style.removeProperty(i(s));else for(key in s)void 0!==s[key]&&(s[key]||0===s[key]?c+=i(key)+":"+o(key,s[key])+";":e.style.removeProperty(i(key)));return e.style.cssText+=";"+c,this},disabled:function(e,t){if(arguments.length<2)return!!this.dom.disabled;return e.disabled=t,this},hasClass:h,hide:function(e){return m.css(e,"display","none"),this},isInvisible:function(e){return"none"==m.css(e,"display")||0==m.css(e,"opacity")},removeClass:p,show:function(e){m.css(e,"display",""),"none"==m.css(e,"display")&&m.css(e,"display",function(e){var t,n;c[e]||(t=document.createElement(e),document.body.appendChild(t),n=d(t).getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),c[e]=n);return c[e]}(e.nodeName));return this},toggleClass:function(e,t,n){return t.split(/\s+/g).forEach(function(t){void 0===n&&(n=!h(e,t)),n?f(e,t):p(e,t)}),this}}),e.attach("domx.styler",m)}),e("skylark-domx-finder/finder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder"],function(e,t,n,r){var o={},s=Array.prototype.filter,a=Array.prototype.slice,l=n.matchesSelector;(function(){var e,t,n,r,i,o={},s={},a=/\\/g,l=function(n,i){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var a=(r=!!i)?s:o;if(a[n])return a[n];for(e={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},t=-1;n!=(n=n.replace(d,h)););return e.length=e.expressions.length,a[e.raw]=r?c(e):e},u=function(e){return"!"===e?" ":" "===e?"!":/^!/.test(e)?e.replace(/^!/,""):"!"+e},c=function(e){for(var t=e.expressions,n=0;n<t.length;n++){for(var r=t[n],i={parts:[],tag:"*",combinator:u(r[0].combinator)},o=0;o<r.length;o++){var s=r[o];s.reverseCombinator||(s.reverseCombinator=" "),s.combinator=s.reverseCombinator,delete s.reverseCombinator}r.reverse().push(i)}return e},f=(i=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(e){return e.replace(i,"\\")}),d=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+f(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function h(i,o,s,l,c,d,h,p,m,g,y,v,k,_,b,x){if((o||-1===t)&&(e.expressions[++t]=[],n=-1,o))return"";if(s||l||-1===n){s=s||" ";var w=e.expressions[t];r&&w[n]&&(w[n].reverseCombinator=u(s)),w[++n]={combinator:s,tag:"*"}}var C=e.expressions[t][n];if(c)C.tag=c.replace(a,"");else if(d)C.id=d.replace(a,"");else if(h)h=h.replace(a,""),C.classList||(C.classList=[]),C.classes||(C.classes=[]),C.classList.push(h),C.classes.push({value:h,regexp:new RegExp("(^|\\s)"+f(h)+"(\\s|$)")});else if(k)x=(x=x||b)?x.replace(a,""):null,C.pseudos||(C.pseudos=[]),C.pseudos.push({key:k.replace(a,""),value:x,type:1==v.length?"class":"element"});else if(p){var E,S;switch(p=p.replace(a,""),y=(y||"").replace(a,""),m){case"^=":S=new RegExp("^"+f(y));break;case"$=":S=new RegExp(f(y)+"$");break;case"~=":S=new RegExp("(^|\\s)"+f(y)+"(\\s|$)");break;case"|=":S=new RegExp("^"+f(y)+"(-|$)");break;case"=":E=function(e){return y==e};break;case"*=":E=function(e){return e&&e.indexOf(y)>-1};break;case"!=":E=function(e){return y!=e};break;default:E=function(e){return!!e}}""==y&&/^[*$^]=$/.test(m)&&(E=function(){return!1}),E||(E=function(e){return e&&S.test(e)}),C.attributes||(C.attributes=[]),C.attributes.push({key:p,operator:m,value:y,test:E})}return""}var p=this.Slick||{};p.parse=function(e){return l(e)},p.escapeRegExp=f,this.Slick||(this.Slick=p)}).apply(o);var u=/^(?:input|select|textarea|button)$/i,c=/^h\d$/i,a=Array.prototype.slice;o.parseSelector=o.Slick.parse;var f=o.pseudos={button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},checked:function(e){return!!e.checked},contains:function(e,t,n,r){if($(this).text().indexOf(r)>-1)return this},disabled:function(e){return!!e.disabled},enabled:function(e){return!e.disabled},eq:function(e,t,n,r){return t==r},even:function(e,t,n,r){return t%2==0},focus:function(e){return document.activeElement===e&&(e.href||e.type||e.tabindex)},focusable:function(e){return r.focusable(e,null!=e.tabindex)},first:function(e,t){return 0===t},gt:function(e,t,n,r){return t>r},has:function(e,t,n,r){return v(e,r)},header:function(e){return c.test(e.nodeName)},hidden:function(e){return!o.pseudos.visible(e)},input:function(e){return u.test(e.nodeName)},last:function(e,t,n){return t===n.length-1},lt:function(e,t,n,r){return t<r},not:function(e,t,n,r){return!b(e,r)},odd:function(e,t,n,r){return t%2==1},parent:function(e){return!!e.parentNode},selected:function(e){return!!e.selected},tabbable:function(e){var t=e.tabindex,n=null!=t;return(!n||t>=0)&&r.focusable(element,n)},text:function(e){return"text"===e.type},visible:function(e){return e.offsetWidth&&e.offsetWidth},empty:function(e){return!e.hasChildNodes()}};function d(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function h(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}for(i in["first","eq","last"].forEach(function(e){f[e].isArrayFilter=!0}),f.nth=f.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f[i]=d(i);for(i in{submit:!0,reset:!0})f[i]=h(i);function p(e,n,r){for(var i=[],o=r&&t.isString(r);(e=e.parentNode)&&9!==e.nodeType;){if(r)if(o){if(b(e,r))break}else if(t.isArrayLike(r)){if(t.inArray(e,r)>-1)break}else if(e==r)break;n&&!b(e,n)||i.push(e)}return i}function m(e,t){for(var n=e.childNodes,r=[],i=0;i<n.length;i++){var e=n[i];1==e.nodeType&&r.push(e)}return t&&(r=o.filter(r,t)),r}function g(e,t){try{return a.call(e.querySelectorAll(t))}catch(e){}return o.query(e,t)}function y(e,t){try{return e.querySelector(t)}catch(e){}var n=o.query(e,t);return n.length>0?n[0]:null}function v(e,t){return t||(t=e,e=document.body),b(e,t)?e:y(e,t)}function k(e,t,n){for(var r=e.childNodes,i=r[0];i;){if(1==i.nodeType){if(!t||b(i,t))return i;if(n)break}i=i.nextSibling}return null}function _(e,t,n){for(var r=e.childNodes,i=r[r.length-1];i;){if(1==i.nodeType){if(!t||b(i,t))return i;if(n)break}i=i.previousSibling}return null}function b(e,n){if(!n||!e||1!==e.nodeType)return!1;if(t.isString(n)){try{return l.call(e,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(e){}return o.match(e,n)}return t.isArrayLike(n)?t.inArray(e,n)>-1:t.isPlainObject(n)?o.check(e,n):e===n}function x(e,t,n){for(var r=e.nextSibling;r;){if(1==r.nodeType){if(!t||b(r,t))return r;if(n)break}r=r.nextSibling}return null}function w(e,t){for(var n=e.nextSibling,r=[];n;)1==n.nodeType&&(t&&!b(n,t)||r.push(n)),n=n.nextSibling;return r}function C(e,t){var n=e.parentNode;return!n||t&&!b(n,t)?null:n}function E(e,t,n){for(var r=e.previousSibling;r;){if(1==r.nodeType){if(!t||b(r,t))return r;if(n)break}r=r.previousSibling}return null}function S(e,t){for(var n=e.previousSibling,r=[];n;)1==n.nodeType&&(t&&!b(n,t)||r.push(n)),n=n.previousSibling;return r}function A(e,t){for(var n=e.parentNode.firstChild,r=[];n;)1==n.nodeType&&n!==e&&(t&&!b(n,t)||r.push(n)),n=n.nextSibling;return r}o.divide=function(e){var t,n,r,i,o,s="",a=[];if((n=e.id)&&(s+="#"+n),r=e.classes)for(var l=r.length;l--;)s+="."+r[l].value;if(i=e.attributes)for(var l=0;l<i.length;l++)i[l].operator?s+="["+i[l].key+i[l].operator+JSON.stringify(i[l].value)+"]":s+="["+i[l].key+"]";if(o=e.pseudos)for(l=o.length;l--;)part=o[l],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(s+=":"+part.key+"("+JSON.stringify(part));return(t=e.tag)&&"*"!==t&&(s=t.toUpperCase()+s),s||(s="*"),{nativeSelector:s,customPseudos:a}},o.check=function(e,t,n,r,i){var o,s,a,u,c,f,d,h,p;if(!i){if(o=t.tag){var m=e.nodeName.toUpperCase();if("*"==o){if(m<"@")return!1}else if(m!=(o||"").toUpperCase())return!1}if((s=t.id)&&e.getAttribute("id")!=s)return!1;if(a=t.classes)for(f=a.length;f--;)if(!(h=e.getAttribute("class"))||!a[f].regexp.test(h))return!1;if(u=t.attributes)for(f=u.length;f--;)if((d=u[f]).operator?!d.test(e.getAttribute(d.key)):!e.hasAttribute(d.key))return!1}if(c=t.pseudos)for(f=c.length;f--;)if(d=c[f],p=this.pseudos[d.key]){if((i&&p.isArrayFilter||!i&&!p.isArrayFilter)&&!p(e,n,r,d.value))return!1}else if(!i&&!l.call(e,d.key))return!1;return!0},o.match=function(e,n){var r;if(!(r=t.isString(n)?o.Slick.parse(n):n))return!0;var i,s,a=r.expressions,l=0;for(i=0;s=a[i];i++)if(1==s.length){var u=s[0];if(this.check(e,u))return!0;l++}if(l==r.length)return!1;var c,f=this.query(document,r);for(i=0;c=f[i++];)if(c===e)return!0;return!1},o.filterSingle=function(e,t){var n=s.call(e,function(n,r){return o.check(n,t,r,e,!1)});return n=s.call(n,function(e,r){return o.check(e,t,r,n,!0)})},o.filter=function(e,n){if(!t.isString(n))return o.filterSingle(e,n);var r,i,s=o.Slick.parse(n).expressions,a=[];for(r=0;i=s[r];r++){if(1!=i.length)throw new Error("not supported selector:"+n);var l=i[0],u=o.filterSingle(e,l);a=t.uniq(a.concat(u))}return a},o.combine=function(e,t){var n,r=t.combinator,i=t,l=[];switch(r){case">":l=m(e,i);break;case"+":(n=x(e,i,!0))&&l.push(n);break;case"^":(n=k(e,i,!0))&&l.push(n);break;case"~":l=w(e,i);break;case"++":var u=E(e,i,!0),c=x(e,i,!0);u&&l.push(u),c&&l.push(c);break;case"~~":l=A(e,i);break;case"!":l=p(e,i);break;case"!>":(n=C(e,i))&&l.push(n);break;case"!+":l=E(e,i,!0);break;case"!^":(n=_(e,i,!0))&&l.push(n);break;case"!~":l=S(e,i);break;default:var f=this.divide(t);if(l=a.call(e.querySelectorAll(f.nativeSelector)),f.customPseudos)for(var d=f.customPseudos.length-1;d>=0;d--)l=s.call(l,function(e,t){return o.check(e,{pseudos:[f.customPseudos[d]]},t,l,!1)}),l=s.call(l,function(e,t){return o.check(e,{pseudos:[f.customPseudos[d]]},t,l,!0)})}return l},o.query=function(e,n,r){for(var i,s,a=this.Slick.parse(n),l=[],u=a.expressions,c=0;i=u[c];c++){for(var f,d=[e],h=0;s=i[h];h++)(f=t.map(d,function(e,t){return o.combine(e,s)}))&&(d=f);f&&(l=l.concat(f))}return l};var O=function(){return O};return t.mixin(O,{ancestor:function(e,n,r){var i=r&&t.isString(r);for(;e=e.parentNode;){if(b(e,n))return e;if(r)if(i){if(b(e,r))break}else if(e==r)break}return null},ancestors:p,byId:function(e,t){return(t=t||r.doc()).getElementById(e)},children:m,closest:function(e,t){for(;e&&!b(e,t);)e=e.parentNode;return e},descendant:y,descendants:g,find:v,findAll:function(e,t){t||(t=e,e=document.body);return g(e,t)},firstChild:k,lastChild:_,matches:b,nextSibling:x,nextSiblings:w,parent:C,previousSibling:E,previousSiblings:S,pseudos:o.pseudos,siblings:A}),e.attach("domx.finder",O)}),e("skylark-domx-finder/main",["./finder"],function(e){return e}),e("skylark-domx-finder",["skylark-domx-finder/main"],function(e){return e}),e("skylark-domx-query/query",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder"],function(e,t,n,r){var i,o=Array.prototype.some,s=Array.prototype.push,a=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),l=(Array.prototype.map,Array.prototype.filter),u=Array.prototype.forEach,c=Array.prototype.indexOf,f=Array.prototype.sort,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=t.funcArg,p=t.isArrayLike,m=t.isString,g=t.uniq,y=t.isFunction,v=t.type,k=(t.isArray,t.isWindow,t.isDocument,t.isObject);t.isPlainObject,t.compact,t.flatten,t.camelCase,t.dasherize,r.children;function _(e,r,i){return function(i){var o,s=t.map(arguments,function(e){return"function"==(o=v(e))||"object"==o||"array"==o||null==e?e:n.createFragment(e)});return s.length<1?this:(this.each(function(t){e.apply(r,[this,s,t>0])}),this)}}function b(e,n){return function(){var r=a.call(arguments),i=t.map(this,function(t,i){return e.apply(n,[t].concat(r))});return O(g(i))}}function x(e,t,n){return function(r){a.call(arguments);var i=this.map(function(i,o){return o.querySelector?e.apply(t,n?[o]:[o,r]):[]});return n&&r?i.filter(r):i}}function w(e,t,n){return function(r,i){a.call(arguments);var o=this.map(function(o,s){return e.apply(t,n?[s,r]:[s,i,r])});return n&&i?o.filter(i):o}}function C(e,t){return function(){var n=a.call(arguments);return this.each(function(r,i){e.apply(t,[this].concat(n))}),this}}function E(e,n,r){return function(i){return t.isDefined(i)?(u.call(this,function(t,o){var s;s=r?h(t,i,o,r(t)):i,e.apply(n,[t,s])}),this):this[0]?e.apply(n,[this[0]]):void 0}}var S,A=t.klass({klassName:"SkNodeList",init:function(e,i){var o,a,l,u;if(e&&(this.context=i=i||n.doc(),m(e)?(this.selector=e,(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:d.exec(e))?o[1]?(a=n.createFragment(e),t.isPlainObject(i)&&(u=i)):(l=r.byId(o[2],n.ownerDoc(i)))&&(a=[l]):(t.isString(i)&&(i=r.find(i)),a=r.descendants(i,e))):a=e!==window&&p(e)?e:[e]),a&&(s.apply(this,a),u))for(var c in u)t.isFunction(this[c])?this[c](u[c]):this.attr(c,u[c]);return this}}),O=function(){i=function(e){return e instanceof A},init=function(e,t){return new A(e,t)};var e=function(t,n){return y(t)?(e.ready(function(){t(e)}),d):i(t)?t:n&&i(n)&&m(t)?n.find(t):init(t,n)},d=e(document);e.fn=A.prototype,t.mixin(e.fn,{length:0,map:function(n){return e(g(t.map(this,function(e,t){return n.call(e,t,e)})))},slice:function(){return e(a.apply(this,arguments))},forEach:function(){return u.apply(this,arguments)},get:function(e){return void 0===e?a.call(this):this[e>=0?e:e+this.length]},indexOf:function(){return c.apply(this,arguments)},sort:function(){return f.apply(this,arguments)},toArray:function(){return a.call(this)},size:function(){return this.length},remove:function(e){return e?this.find(e).remove():(this.each(function(e,t){n.remove(t)}),this)},each:function(e){return t.each(this,e),this},filter:function(t){return y(t)?this.not(this.not(t)):e(l.call(this,function(e){return r.matches(e,t)}))},add:function(t,n){return e(g(this.toArray().concat(e(t,n).toArray())))},is:function(e){if(this.length>0){if(t.isString(e))return o.call(this,function(t){return r.matches(t,e)});if(t.isArrayLike(e))return o.call(this,function(n){return t.inArray(n,e)>-1});if(t.isHtmlNode(e))return o.call(this,function(t){return t==e})}return!1},not:function(t){var n=[];if(y(t)&&void 0!==t.call)this.each(function(e,r){t.call(this,e,r)||n.push(this)});else{var r="string"==typeof t?this.filter(t):p(t)&&y(t.item)?a.call(t):e(t);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return e(n)},has:function(t){return this.filter(function(){return k(t)?n.contains(this,t):e(this).find(t).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:x(r.descendants,r),closest:x(r.closest,r),parents:x(r.ancestors,r),parentsUntil:w(r.ancestors,r),parent:x(r.parent,r),children:x(r.children,r),contents:b(n.contents,n),empty:C(n.empty,n),html:E(n.html,n),pluck:function(e){return t.map(this,function(t){return t[e]})},pushStack:function(t){var n=e(t);return n.prevObject=this,n},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n="function"==typeof t;return this.each(function(r){e(this).wrapAll(n?t.call(this,r):t)})},wrapAll:function(t){var n;return this[0]&&("function"==typeof t&&(t=t.call(this[0])),n=e(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(t){return"function"==typeof t?this.each(function(n){e(this).wrapInner(t.call(this,n))}):this.each(function(){var n=e(this),r=n.contents();r.length?r.wrapAll(t):n.append(t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){e(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(t){return this.each(function(){var n=e(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return e(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:x(r.previousSiblings,r),next:function(t){return e(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:x(r.nextSiblings,r),siblings:x(r.siblings,r),index:function(t){return t?this.indexOf(e(t)[0]):this.parent().children().indexOf(this[0])}}),e.fn.detach=e.fn.remove,e.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};n.traverse;return e.fn.after=_(n.after,n),e.fn.prepend=_(n.prepend,n),e.fn.before=_(n.before,n),e.fn.append=_(n.append,n),t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(t){for(var r,i=[],o=e(t),a=o.length-1,l=0;l<=a;l++)r=l===a?this:this.clone(!0),e(o[l])[n](r),s.apply(i,r.get());return this.pushStack(i)}}),e}();return(S=O).fn.scrollParent=function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=S(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&i.length?i:S(this[0].ownerDocument||document)},function(e){e.fn.end=function(){return this.prevObject||e()},e.fn.andSelf=function(){return this.add(this.prevObject||e())},e.fn.addBack=function(e){return this.prevObject?e?this.add(this.prevObject.filter(e)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=n.apply(this,arguments);return e.prevObject=this,e}})}(O),function(e){var o;e.fn.query=e.fn.find,e.fn.place=function(e,o){return t.isString(e)?e=r.descendant(e):i(e)&&(e=e[0]),this.each(function(t,r){switch(o){case"before":n.before(e,r);break;case"after":n.after(e,r);break;case"replace":n.replace(e,r);break;case"only":n.empty(e),n.append(e,r);break;case"first":n.prepend(e,r);break;default:n.append(e,r)}})},e.fn.addContent=function(e,n){return e.template&&(e=t.substitute(e.template,e)),this.append(e)},e.fn.disableSelection=(o="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(o+".ui-disableSelection",function(e){e.preventDefault()})}),e.fn.enableSelection=function(){return this.off(".ui-disableSelection")},e.fn.reflow=function(){return n.flow(this[0])},e.fn.isBlockNode=function(){return n.isBlockNode(this[0])}}(O),O.fn.plugin=function(e,t){var n=a.call(arguments,1),r=this,i=this;return this.each(function(){i=plugins.instantiate.apply(r,[this,e].concat(n))}),i},O.wraps={wrapper_node_operation:_,wrapper_map:b,wrapper_value:E,wrapper_selector:x,wrapper_some_chk:function(e,t){return function(){var n=a.call(arguments);return o.call(this,function(r){return e.apply(t,[r].concat(n))})}},wrapper_selector_until:w,wrapper_every_act_firstArgFunc:function(e,t,n){return function(r){var i=a.call(arguments);return u.call(this,function(o,s){var a=h(o,r,s,n(o));e.apply(t,[o,a].concat(i.slice(1)))}),this}},wrapper_every_act:C,wrapper_name_value:function(e,n,r){return function(i,o){return t.isPlainObject(i)||t.isDefined(o)?(u.call(this,function(t,s){var a;a=r?h(t,o,s,r(t,i)):o,e.apply(n,[t,i,a])}),this):this[0]?e.apply(n,[this[0],i]):void 0}}},e.attach("domx.query",O)}),e("skylark-domx-query/main",["./query"],function(e){return e}),e("skylark-domx-query",["skylark-domx-query/main"],function(e){return e}),e("skylark-domx-velm/velm",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query"],function(e,t,n,r,i){var o=Array.prototype.map,s=Array.prototype.slice,a=t.klass({klassName:"VisualElement",_construct:function(e){t.isString(e)&&(e="<"===e.charAt(0)?n.createFragment(e)[0]:document.getElementById(e)),this._elm=e}});a.prototype.$=a.prototype.query=function(e){return i(e,this._elm)},a.prototype.elm=function(){return this._elm};var l=new a(document.body),u=function(e){return e?new a(e):l};return t.mixin(u,{batch:function(e,t,n){return e.forEach(function(e){var r=e instanceof a?e:u(e);r[t].apply(r,n)}),this},root:new a(document.body),VisualElement:a,partial:function(e,t){var n={};n[e]=t,a.partial(n)},delegate:function(e,n){var r={};e.forEach(function(e){r[e]=function(e,n){return function(){var r=this._elm,i=e.apply(n,[r].concat(s.call(arguments)));if(i){if(i===n)return this;i instanceof HTMLElement?i=new a(i):t.isArrayLike(i)&&(i=o.call(i,function(e){return e instanceof HTMLElement?new a(e):e}))}return i}}(n[e],n)}),a.partial(r)}}),u.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],r),u.find=function(e){return"body"===e?this.root:this.root.descendant(e)},u.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],n),e.attach("domx.velm",u)}),e("skylark-domx-velm/main",["./velm"],function(e){return e}),e("skylark-domx-velm",["skylark-domx-velm/main"],function(e){return e}),e("skylark-domx-styler/main",["./styler","skylark-domx-velm","skylark-domx-query"],function(e,t,n){t.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],e);return["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(e){var n=e;t.VisualElement.prototype[n]=function(t){return this.css(e,t),this}}),n.fn.style=n.wraps.wrapper_name_value(e.css,e),n.fn.css=n.wraps.wrapper_name_value(e.css,e),n.fn.hasClass=n.wraps.wrapper_some_chk(e.hasClass,e),n.fn.addClass=n.wraps.wrapper_every_act_firstArgFunc(e.addClass,e,e.className),n.fn.removeClass=n.wraps.wrapper_every_act_firstArgFunc(e.removeClass,e,e.className),n.fn.toggleClass=n.wraps.wrapper_every_act_firstArgFunc(e.toggleClass,e,e.className),n.fn.replaceClass=function(e,t){return this.removeClass(t),this.addClass(e),this},n.fn.replaceClass=function(e,t){return this.removeClass(t),this.addClass(e),this},e}),e("skylark-domx-styler",["skylark-domx-styler/main"],function(e){return e}),e("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(e,t,n,r){var i,o=/^(?:body|html)$/i,s=t.toPixel,a=n.offsetParent;function l(){if(void 0!==i)return i;var e,t,o=n.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],s=o.childNodes[0];return n.append(document.body,o),e=s.offsetWidth,r.css(o,"overflow","scroll"),t=s.offsetWidth,e===t&&(t=o[0].clientWidth),n.remove(o),i=e-t}function u(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:s(t.borderLeftWidth,e),top:s(t.borderTopWidth,e),right:s(t.borderRightWidth,e),bottom:s(t.borderBottomWidth,e)}}function c(e,t){if(void 0===t)return o.test(e.nodeName)?{top:0,left:0}:e.getBoundingClientRect();var n=a(e),r=c(n),i=p(e),s=u(n);return v(e,{top:t.top-r.top-i.top-s.top,left:t.left-r.left-i.left-s.left}),this}function f(e,t){return void 0===t?e.getBoundingClientRect():(c(e,t),x(e,t),this)}function d(e,t){if(void 0==t)return{width:e.clientWidth,height:e.clientHeight};var n="border-box"===r.css(e,"box-sizing"),i={width:t.width,height:t.height};if(n){var o=u(e);void 0!==i.width&&(i.width=i.width+o.left+o.right),void 0!==i.height&&(i.height=i.height+o.top+o.bottom)}else{var s=g(e);void 0!==i.width&&(i.width=i.width-s.left-s.right),void 0!==i.height&&(i.height=i.height-s.top-s.bottom)}return r.css(e,i),this}function h(e){var t=e.documentElement,n=e.body,r=Math.max,i=r(t.scrollWidth,n.scrollWidth),o=r(t.clientWidth,n.clientWidth),s=r(t.offsetWidth,n.offsetWidth),a=r(t.scrollHeight,n.scrollHeight),l=r(t.clientHeight,n.clientHeight),u=r(t.offsetHeight,n.offsetHeight);return{width:i<s?o:i,height:a<u?l:a}}function p(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:s(t.marginLeft),top:s(t.marginTop),right:s(t.marginRight),bottom:s(t.marginBottom)}}function m(e){var t=x(e),n=p(e);return{width:t.width+n.left+n.right,height:t.height+n.top+n.bottom}}function g(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:s(t.paddingLeft),top:s(t.paddingTop),right:s(t.paddingRight),bottom:s(t.paddingBottom)}}function y(e,t){if(void 0===t){var n=e.getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset}}var r=a(e),i=y(r),o=p(e),s=u(r);return v(e,{top:t.top-i.top-o.top-s.top,left:t.left-i.left-o.left-s.left}),this}function v(e,t){if(void 0==t){var n=a(e),i=c(e),o=c(n),s=(p(e),u(n));return{top:i.top-o.top-s.top,left:i.left-o.left-s.left}}var l={top:t.top,left:t.left};return"static"==r.css(e,"position")&&(l.position="relative"),r.css(e,l),this}function k(e,t){if(void 0===t){var n=a(e),r=f(e),i=c(n),o=(p(e),u(n));return{top:r.top-i.top-o.top,left:r.left-i.left-o.left,width:r.width,height:r.height}}return v(e,t),x(e,t),this}function _(e,t){9===e.nodeType&&(e=e.defaultView);var n="scrollLeft"in e;return void 0===t?n?e.scrollLeft:e.pageXOffset:(n?e.scrollLeft=t:e.scrollTo(t,e.scrollY),this)}function b(e,t){9===e.nodeType&&(e=e.defaultView);var n="scrollTop"in e;return void 0===t?n?e.scrollTop:e.pageYOffset:(n?e.scrollTop=t:e.scrollTo(e.scrollX,t),this)}function x(e,n){if(void 0==n)return t.isWindow(e)?{width:e.innerWidth,height:e.innerHeight}:t.isDocument(e)?h(document):{width:e.offsetWidth,height:e.offsetHeight};var i="border-box"===r.css(e,"box-sizing"),o={width:n.width,height:n.height};if(!i){var s=g(e),a=u(e);void 0!==o.width&&""!==o.width&&null!==o.width&&(o.width=o.width-s.left-s.right-a.left-a.right),void 0!==o.height&&""!==o.height&&null!==o.height&&(o.height=o.height-s.top-s.bottom-a.top-a.bottom)}return r.css(e,o),this}function w(){return w}return t.mixin(w,{borderExtents:u,boundingPosition:c,boundingRect:f,clientHeight:function(e,t){return void 0==t?d(e).height:d(e,{height:t})},clientSize:d,clientWidth:function(e,t){return void 0==t?d(e).width:(d(e,{width:t}),this)},contentRect:function(e){var t=d(e),n=g(e);return{left:n.left,top:n.top,width:t.width-n.left-n.right,height:t.height-n.top-n.bottom}},fullCover:function(e,n,r){let i=r,o=n;t.isUndefined(o)&&(o=!0);t.isUndefined(i)&&(i=!0);e.style.position="absolute",o&&(e.style.left=0,e.style.right=0);i&&(e.style.top=0,e.style.bottom=0)},getDocumentSize:h,height:function(e,t){return void 0==t?x(e).height:(x(e,{height:t}),this)},isVisible:function(e){var t=e.offsetTop,n=e.offsetLeft,r=e.offsetWidth,i=e.offsetHeight;for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return value=t>=window.pageYOffset&&n>=window.pageXOffset&&t+i<=window.pageYOffset+window.innerHeight&&n+r<=window.pageXOffset+window.innerWidth},marginExtents:p,marginRect:function(e){var t=k(e),n=p(e);return{left:t.left,top:t.top,width:t.width+n.left+n.right,height:t.height+n.top+n.bottom}},marginSize:m,offsetParent:a,paddingExtents:g,pagePosition:y,pageRect:function(e,t){if(void 0===t){var n=e.getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}}return y(e,t),x(e,t),this},relativePosition:v,relativeRect:k,scrollbarWidth:l,scrollIntoView:function(e,t){var n,r,i,o,s,a,l=e.parentNode,u=function(e,t){var n,r,i=e;n=r=0;for(;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(e,l);n=u.x,r=u.y,i=e.offsetWidth,o=e.offsetHeight,s=l.clientWidth,a=l.clientHeight,"end"==t?(n-=s-i,r-=a-o):"center"==t&&(n-=s/2-i/2,r-=a/2-o/2);return l.scrollLeft=n,l.scrollTop=r,this},scrollLeft:_,scrollTop:b,size:x,testAxis:function(e){var t=e.offsetTop,n=e.offsetLeft,r=e.offsetWidth,i=e.offsetHeight;for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;var o={x:0,y:0};t<window.pageYOffset?o.y=t-window.pageYOffset:t+i>window.pageYOffset+window.innerHeight&&(o.y=t+i-(window.pageYOffset+window.innerHeight));n<window.pageXOffset?o.x=n-window.pageXOffset:n+r>window.pageXOffset+window.innerWidth&&(o.x=n+r-(window.pageXOffset+window.innerWidth));return o},width:function(e,t){return void 0==t?x(e).width:(x(e,{width:t}),this)}}),function(){var e=Math.max,i=Math.abs,o=/left|center|right/,s=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/;function f(e,t,n){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?n/100:1)]}function d(e,t){return parseInt(r.css(e,t),10)||0}var h={fit:{left:function(t,n){var r,i=n.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=t.left-n.collisionPosition.marginLeft,l=o-a,u=a+n.collisionWidth-s-o;n.collisionWidth>s?l>0&&u<=0?(r=t.left+l+n.collisionWidth-s-o,t.left+=l-r):t.left=u>0&&l<=0?o:l>u?o+s-n.collisionWidth:o:l>0?t.left+=l:u>0?t.left-=u:t.left=e(t.left-a,t.left)},top:function(t,n){var r,i=n.within,o=i.isWindow?i.scrollTop:i.offset.top,s=n.within.height,a=t.top-n.collisionPosition.marginTop,l=o-a,u=a+n.collisionHeight-s-o;n.collisionHeight>s?l>0&&u<=0?(r=t.top+l+n.collisionHeight-s-o,t.top+=l-r):t.top=u>0&&l<=0?o:l>u?o+s-n.collisionHeight:o:l>0?t.top+=l:u>0?t.top-=u:t.top=e(t.top-a,t.top)}},flip:{left:function(e,t){var n,r,o=t.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,f=u+t.collisionWidth-a-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((n=e.left+d+h+p+t.collisionWidth-a-s)<0||n<i(c))&&(e.left+=d+h+p):f>0&&((r=e.left-t.collisionPosition.marginLeft+d+h+p-l)>0||i(r)<f)&&(e.left+=d+h+p)},top:function(e,t){var n,r,o=t.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,f=u+t.collisionHeight-a-l,d="top"===t.my[1],h=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];c<0?((r=e.top+h+p+m+t.collisionHeight-a-s)<0||r<i(c))&&(e.top+=h+p+m):f>0&&((n=e.top-t.collisionPosition.marginTop+h+p+m-l)>0||i(n)<f)&&(e.top+=h+p+m)}},flipfit:{left:function(){h.flip.left.apply(this,arguments),h.fit.left.apply(this,arguments)},top:function(){h.flip.top.apply(this,arguments),h.fit.top.apply(this,arguments)}}};w.posit=function(c,p){var g,v,k,w,C,E,S=(p=t.extend({},p)).of,A=(N=p.within,j=N||window,P=n.isWindow(j),D=!!j&&9===j.nodeType,F=!P&&!D,M=m(j),{element:j,isWindow:P,isDocument:D,offset:F?y(N):{left:0,top:0},scrollLeft:_(j),scrollTop:b(j),width:M.width,height:M.height}),O=function(e){var t=e.isWindow||e.isDocument?"":r.css(e.element,"overflow-x"),n=e.isWindow||e.isDocument?"":r.css(e.element,"overflow-y"),i="scroll"===t||"auto"===t&&e.width<scrollWidth(e.element);return{width:"scroll"===n||"auto"===n&&e.height<scrollHeight(e.element)?l():0,height:i?l():0}}(A),T=(p.collision||"flip").split(" "),L={};var N,j,P,D,F,M;R=S,E=9===R.nodeType?{size:x(R),offset:{top:0,left:0}}:n.isWindow(R)?{size:x(R),offset:{top:b(R),left:_(R)}}:R.preventDefault?{size:{width:0,height:0},offset:{top:R.pageY,left:R.pageX}}:{size:x(R),offset:y(R)},S.preventDefault&&(p.at="left top");var R;v=E.size.width,k=E.size.height,w=E.offset,C=t.extend({},w),t.each(["my","at"],function(){var e,t,n=(p[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",e=a.exec(n[0]),t=a.exec(n[1]),L[this]=[e?e[0]:0,t?t[0]:0],p[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===T.length&&(T[1]=T[0]);"right"===p.at[0]?C.left+=v:"center"===p.at[0]&&(C.left+=v/2);"bottom"===p.at[1]?C.top+=k:"center"===p.at[1]&&(C.top+=k/2);return g=f(L.at,v,k),C.left+=g[0],C.top+=g[1],function(n){var r,o,s=m(n),a=s.width,l=s.height,u=d(n,"marginLeft"),c=d(n,"marginTop"),_=a+u+d(n,"marginRight")+O.width,b=l+c+d(n,"marginBottom")+O.height,x=t.extend({},C),E=f(L.my,s.width,s.height);"right"===p.my[0]?x.left-=a:"center"===p.my[0]&&(x.left-=a/2),"bottom"===p.my[1]?x.top-=l:"center"===p.my[1]&&(x.top-=l/2),x.left+=E[0],x.top+=E[1],r={marginLeft:u,marginTop:c},t.each(["left","top"],function(e,t){h[T[e]]&&h[T[e]][t](x,{targetWidth:v,targetHeight:k,elemWidth:a,elemHeight:l,collisionPosition:r,collisionWidth:_,collisionHeight:b,offset:[g[0]+E[0],g[1]+E[1]],my:p.my,at:p.at,within:A,elem:n})}),p.using&&(o=function(t){var r=w.left-x.left,o=r+v-a,s=w.top-x.top,u=s+k-l,c={target:{element:S,left:w.left,top:w.top,width:v,height:k},element:{element:n,left:x.left,top:x.top,width:a,height:l},horizontal:o<0?"left":r>0?"right":"center",vertical:u<0?"top":s>0?"bottom":"middle"};v<a&&i(r+o)<v&&(c.horizontal="center"),k<l&&i(s+u)<k&&(c.vertical="middle"),e(i(r),i(o))>e(i(s),i(u))?c.important="horizontal":c.important="vertical",p.using.call(this,t,c)}),y(n,t.extend(x,{using:o}))}(c)}}(),e.attach("domx.geom",w)}),e("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query"],function(e,t,n,r){return n.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","size","width"],t),r.fn.offset=r.wraps.wrapper_value(t.pagePosition,t,t.pagePosition),r.fn.scrollTop=r.wraps.wrapper_value(t.scrollTop,t),r.fn.scrollLeft=r.wraps.wrapper_value(t.scrollLeft,t),r.fn.position=function(n){if(!this.length)return this;if(n)return n.of&&n.of.length&&((n=e.clone(n)).of=n.of[0]),this.each(function(){t.posit(this,n)});var r=this[0];return t.relativePosition(r)},r.fn.offsetParent=r.wraps.wrapper_map(t.offsetParent,t),r.fn.size=r.wraps.wrapper_value(t.size,t),r.fn.width=r.wraps.wrapper_value(t.width,t,t.width),r.fn.height=r.wraps.wrapper_value(t.height,t,t.height),r.fn.clientSize=r.wraps.wrapper_value(t.clientSize,t.clientSize),["width","height"].forEach(function(e){var n=e.replace(/./,function(e){return e[0].toUpperCase()});r.fn["outer"+n]=function(n,r){if(arguments.length?"boolean"!=typeof n&&(r=n,n=!1):(n=!1,r=void 0),void 0===r){var i=this[0];if(!i)return;var o=t.size(i);if(n){var s=t.marginExtents(i);o.width=o.width+s.left+s.right,o.height=o.height+s.top+s.bottom}return"width"===e?o.width:o.height}return this.each(function(i,o){var s={},a=t.marginExtents(o);"width"===e?(s.width=r,n&&(s.width=s.width-a.left-a.right)):(s.height=r,n&&(s.height=s.height-a.top-a.bottom)),t.size(o,s)})}}),r.fn.innerWidth=r.wraps.wrapper_value(t.clientWidth,t,t.clientWidth),r.fn.innerHeight=r.wraps.wrapper_value(t.clientHeight,t,t.clientHeight),t}),e("skylark-domx-geom",["skylark-domx-geom/main"],function(e){return e}),e("skylark-domx-data/data",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-finder","skylark-domx-noder"],function(e,t,n,r){var i=Array.prototype.map,o=(Array.prototype.filter,t.camelCase),s=t.deserializeValue,a=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var u={option:{get:function(e){var t=e.getAttribute("value");return null!=t?t:(m(e).match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},select:{get:function(e){var t,n,i,o=e.options,s=e.selectedIndex,a="select-one"===e.type,l=a?null:[],u=a?s+1:o.length;for(i=s<0?u:a?s:0;i<u;i++)if((n=o[i]).selected&&!n.disabled&&(!n.parentNode.disabled||!r.nodeName(n.parentNode,"optgroup"))){if(t=g(n),a)return t;l.push(t)}return l},set:function(e,n){for(var r,i,o=e.options,s=t.makeArray(n),a=o.length;a--;)((i=o[a]).selected=t.inArray(u.option.get(i),s)>-1)&&(r=!0);return r||(e.selectedIndex=-1),s}}};function c(e,t,n){if(void 0===n){if("object"==typeof t){for(var r in t)c(e,r,t[r]);return this}return e.getAttribute?e.getAttribute(t):e[t]}return e.setAttribute?e.setAttribute(t,n):e[t]=n,this}function f(e,n){var r=e._$_store;return!r&&n&&(r=e._$_store=function(e){var n={};return t.each(e.attributes||[],function(e,t){0==t.name.indexOf("data-")&&(n[o(t.name.replace("data-",""))]=s(t.value))}),n}(e)),r}function d(e,t,n){var r=f(e,!0);r[o(t)]=n}function h(e,t,n){if(void 0===n){if("object"==typeof t){for(var r in t)d(e,r,t[r]);return this}return function(e,t){if(void 0===t)return f(e,!0);var n=f(e);if(n){if(t in n)return n[t];var r=o(t);if(r in n)return n[r]}var i="data-"+t.replace(a,"-$1").toLowerCase();return c(e,i)}(e,t)}return d(e,t,n),this}function p(e){e._$_store&&delete e._$_store}function m(e,t){return void 0===t?e.textContent:(e.textContent=null==t?"":""+t,this)}function g(e,n){var r=u[e.type]||u[e.nodeName.toLowerCase()];if(void 0===n)return r&&"get"in r&&void 0!==(ret=r.get(e,"value"))?ret:(ret=e.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret);null==n?n="":"number"==typeof n?n+="":t.isArray(n)&&(n=t.map(n,function(e){return null==e?"":e+""})),r&&"set"in r&&void 0!==r.set(e,n,"value")||(e.value=n)}function y(){return y}return t.each(["radio","checkbox"],function(){u[this]={set:function(e,n){if(t.isArray(n))return e.checked=t.inArray(g(e),n)>-1}}}),n.pseudos.data=function(e,t,n,r){return!!h(e,r||n[3])},t.mixin(y,{aria:function(e,t,n){return this.attr(e,"aria-"+t,n)},attr:c,cleanData:p,data:h,pluck:function(e,t){return i.call(e,function(e){return e[t]})},prop:function(e,t,n){return t=l[t]||t,void 0===n?e[t]:(e[t]=n,this)},removeAttr:function(e,t){return t.split(" ").forEach(function(t){!function(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}(e,t)}),this},removeData:function(e,n){if(n){t.isString(n)&&(n=n.split(/\s+/));var r=f(e,!0);n.forEach(function(e){delete r[e]})}else p(e);return this},removeProp:function(e,t){return t.split(" ").forEach(function(t){delete e[t]}),this},text:m,val:g,valHooks:u}),e.attach("domx.data",y)}),e("skylark-domx-data/main",["./data","skylark-domx-velm","skylark-domx-query"],function(e,t,n){return t.delegate(["attr","data","prop","removeAttr","removeData","text","val"],e),n.fn.text=n.wraps.wrapper_value(e.text,e,e.text),n.fn.attr=n.wraps.wrapper_name_value(e.attr,e,e.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(e.removeAttr,e),n.fn.prop=n.wraps.wrapper_name_value(e.prop,e,e.prop),n.fn.removeProp=n.wraps.wrapper_every_act(e.removeProp,e),n.fn.data=n.wraps.wrapper_name_value(e.data,e),n.fn.removeData=n.wraps.wrapper_every_act(e.removeData),n.fn.val=n.wraps.wrapper_value(e.val,e,e.val),e}),e("skylark-domx-data",["skylark-domx-data/main"],function(e){return e}),e("skylark-domx-eventer/eventer",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-finder","skylark-domx-noder","skylark-domx-data"],function(e,t,n,r,i,o){t.mixin;var s=t.each,a=(Array.prototype.slice,t.uid),l=/^([A-Z]|returnValue$|layer[XY]$)/,u={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},c=/complete|loaded|interactive/;function f(e,n){return!n&&e.isDefaultPrevented||(n||(n=e),t.each(u,function(r,i){var o=n[r];e[r]=function(){return this[i]=t.returnTrue,o&&o.apply(n,arguments)},e[i]=t.returnFalse})),e}function d(e){var t=(""+e).split(".");return{type:t[0],ns:t.slice(1).sort().join(" ")}}var h=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],p={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,textInput:12,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},m=function(){return function(e,n){t.isString(e)?n=n||{}:e=(n=e||{}).type||"";var r=d(e);e=r.type,n=t.mixin({bubbles:!0,cancelable:!0},n),r.ns&&(n.namespace=r.ns);var i=function(e){var t=p[e];t||(t=0);return h[t]}(e),o=new i(e,n);return t.safeMixin(o,n),f(o)}}();function g(e,n){var r,i={originalEvent:e};for(r in e)"keyIdentifier"===r||l.test(r)||void 0===e[r]||(i[r]=e[r]);return n&&t.mixin(i,n),f(i,e)}var y={},v="onfocusin"in window,k={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"},b=function(e){return _[e]||v&&k[e]||e},x={},w=t.klass({init:function(e,t){this._target=e,this._event=t,this._bindings=[]},add:function(e,n){var o=this._bindings,s={fn:e,options:t.mixin({},n)};o.push(s);var a=this;if(!a._listener){a._listener=function(e){var n=this,o=g(e),s=e._args,l=a._bindings,u=o.namespace;s=t.isDefined(s)?[o].concat(s):[o],t.each(l,function(e,l){var c=n;if(o.isImmediatePropagationStopped&&o.isImmediatePropagationStopped())return!1;var f=l.fn,d=l.options||{},h=d.selector,p=d.one,m=d.data;if(!u||u==d.ns||-1!==d.ns.indexOf(u)){if(h){if(!(c=r.closest(o.target,h))||c===n)return;t.mixin(o,{currentTarget:c,liveFired:n})}var g=a._event;if(g in _){var y=o.relatedTarget;if(y&&(y===c||i.contains(c,y)))return}t.isDefined(m)&&(o.data=m),p&&a.remove(f,d);var v=f.apply(c,s);!1===v&&(o.preventDefault(),o.stopPropagation())}})};var l=a._event;a._target.addEventListener?a._target.addEventListener(b(l),a._listener,!1):console.warn("invalid eventer object",a._target)}},remove:function(e,n){var r,i;(n=t.mixin({},n)).ns&&(i=n.ns,r=new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(t){var i=(!e||e===t.fn)&&(!r||r.test(t.options.ns))&&(!n.selector||n.selector==t.options.selector);return!i}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(b(this._event),this._listener,!1),this._listener=null)}}),C=t.klass({init:function(e){this._target=e,this._handler={}},register:function(e,n,r){var i=d(e),e=i.type,o=y[e],s=o&&(o.bindType||o.bindEventName),a=this._handler;void 0===a[e]&&(a[e]=new w(this._target,s||e)),a[e].add(n,t.mixin({ns:i.ns},r))},unregister:function(e,n,r){var i=this._handler,o=d(e);if(e=o.type){var s=i[e];s&&s.remove(n,t.mixin({ns:o.ns},r))}else for(e in i){var s=i[e];s.remove(n,t.mixin({ns:o.ns},r))}}}),E=function(e){var t=a(e),n=x[t];return n||(n=x[t]=new C(e)),n};function S(e,n,r,i,o,s){if(t.isPlainObject(n))return t.each(n,function(t,n){S(e,t,r,i,n,s)}),this;t.isString(r)||t.isFunction(o)||(o=i,i=r,r=void 0),t.isFunction(i)&&(o=i,i=void 0),!1===o&&(o=t.returnFalse),"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var a=E(e);return n.forEach(function(e){if("ready"==e)return A(o);a.register(e,o,{data:i,selector:r,one:!!s})}),this}function A(e){return c.test(document.readyState)&&document.body?t.defer(e):document.addEventListener("DOMContentLoaded",e,!1),this}var O={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function T(){return T}return n.support.transition&&(y.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),t.mixin(T,{NativeEvents:p,create:m,keys:O,off:function e(n,r,i,o){if(t.isPlainObject(r))return t.each(r,function(t,r){e(n,t,i,r)}),this;t.isString(i)||t.isFunction(o)||!1===o||(o=i,i=void 0);!1===o&&(o=t.returnFalse);"string"==typeof r&&(r=r.indexOf(",")>-1?r.split(","):r.split(/\s/));var s=E(n);r&&r.forEach(function(e){s.unregister(e,o,{selector:i})});return this},on:S,one:function(e,t,n,r,i){return S(e,t,n,r,i,1),this},proxy:g,ready:A,shortcuts:function(e){var t=o.data(e,"shortcuts");if(!t){t={},o.data(e,"shortcuts",t);var n=function(e,t){var n=t.metaKey||t.ctrlKey;if(e.ctrl==n&&e.alt==t.altKey&&e.shift==t.shiftKey&&(t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode))return t.preventDefault(),"keydown"==t.type&&e.fn(t),!0};S(e,"keyup keypress keydown",function(e){if(!/INPUT|TEXTAREA/.test(e.target.nodeName))for(var r in t)n(t[r],e)})}return{add:function(e,n){(e.indexOf(",")>-1?e.toLowerCase().split(","):e.toLowerCase().split(" ")).forEach(function(e){var r={fn:n,alt:!1,ctrl:!1,shift:!1};e.split("+").forEach(function(e){switch(e){case"alt":case"ctrl":case"shift":r[e]=!0;break;default:r.charCode=e.charCodeAt(0),r.keyCode=O[e]||e.toUpperCase().charCodeAt(0)}});var i=(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode;t[i]=r})}}},special:y,stop:function(e){window.document.all&&(e.keyCode=0);e.preventDefault&&(e.preventDefault(),e.stopPropagation());return this},trigger:function(e,t,n){var r;r=t instanceof Event?t:m(t,n);r._args=n;var i=e.dispatchEvent||e.trigger;i?i.call(e,r):console.warn("The evented parameter is not a eventable object");return this}}),s(p,function(e){T[e]=function(t,n,r,i){return arguments.length>1?this.on(t,e,n,r,i):("focus"==e?t.focus&&t.focus():"blur"==e?t.blur&&t.blur():"click"==e?t.click&&t.click():this.trigger(t,e),this)}}),e.attach("domx.eventer",T)}),e("skylark-domx-eventer/main",["skylark-langx/langx","./eventer","skylark-domx-velm","skylark-domx-query"],function(e,t,n,r){var i=["off","on","one","trigger"];return e.each(t.NativeEvents,function(e){i.push(e)}),n.delegate(i,t),e.each(i,function(e,n){r.fn[n]=r.wraps.wrapper_every_act(t[n],t)}),r.ready=t.ready,t}),e("skylark-domx-eventer",["skylark-domx-eventer/main"],function(e){return e}),e("skylark-datgui/utils/common",["skylark-langx-types","skylark-langx-arrays","skylark-langx-objects","skylark-langx-funcs"],function(e,t,n,r){"use strict";const i=Array.prototype.forEach,o=Array.prototype.slice,s={BREAK:{},extend:n.extend,defaults:function(e){return this.each(o.call(arguments,1),function(t){const n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){const e=o.call(arguments);return function(){let t=o.call(arguments);for(let n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){let r,i;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(const r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:r.defer,debounce:function(e,t,n){let r;return function(){const i=this,o=arguments;const s=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),s&&e.apply(i,o)}},toArray:t.toArray||t.makeArray,isUndefined:e.isUndefined,isNull:e.isNull,isNaN:e.isNaN,isArray:e.isArray,isObject:e.isPlainObject,isNumber:e.isNumber,isString:e.isString,isBoolean:e.isBoolean,isFunction:e.isFunction};return s}),e("skylark-datgui/dom/dom",["skylark-domx-noder","skylark-domx-styler","skylark-domx-geom","skylark-domx-eventer","../utils/common"],function(e,t,n,r,i){"use strict";const o={};i.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){i.each(e,function(e){o[e]=t})});const s={makeSelectable:e.selectable,makeFullscreen:n.fullCover,fakeEvent:function(e,t,n,r){const s=n||{},a=o[t];if(!a)throw new Error("Event type "+t+" not supported.");const l=document.createEvent(a);switch(a){case"MouseEvents":{const e=s.x||s.clientX||0,n=s.y||s.clientY||0;l.initMouseEvent(t,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,e,n,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{const e=l.initKeyboardEvent||l.initKeyEvent;i.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),e(t,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:l.initEvent(t,s.bubbles||!1,s.cancelable||!0)}i.defaults(l,r),e.dispatchEvent(l)},bind:r.on,unbind:r.off,addClass:t.addClass,removeClass:t.removeClass,hasClass:t.hasClass,getWidth:n.width,getHeight:n.height,getOffset:n.pagePosition,isActive:e.isActive};return s}),e("skylark-datgui/controllers/BooleanController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}setValue(e){const t=super.setValue(e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t}updateDisplay(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),super.updateDisplay()}}}),e("skylark-datgui/controllers/OptionController",["./Controller","../dom/dom","../utils/common"],function(e,t,n){"use strict";return class extends e{constructor(e,r,i){super(e,r);let o=i;const s=this;if(this.__select=document.createElement("select"),n.isArray(o)){const e={};n.each(o,function(t){e[t]=t}),o=e}n.each(o,function(e,t){const n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){const e=this.options[this.selectedIndex].value;s.setValue(e)}),this.domElement.appendChild(this.__select)}setValue(e){const t=super.setValue(e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t}updateDisplay(){return t.isActive(this.__select)?this:(this.__select.value=this.getValue(),super.updateDisplay())}}}),e("skylark-datgui/controllers/StringController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const r=this;function i(){r.setValue(r.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),super.updateDisplay()}}}),e("skylark-datgui/controllers/NumberController",["./Controller","../utils/common"],function(e,t){"use strict";function n(e){const t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}return class extends e{constructor(e,r,i){super(e,r);const o=i||{};this.__min=o.min,this.__max=o.max,this.__step=o.step,t.isUndefined(this.__step)?0===this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)}setValue(e){let t=e;return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),super.setValue(t)}min(e){return this.__min=e,this}max(e){return this.__max=e,this}step(e){return this.__step=e,this.__impliedStep=e,this.__precision=n(e),this}}}),e("skylark-datgui/controllers/NumberControllerBox",["./NumberController","../dom/dom","../utils/common"],function(e,t,n){"use strict";return class extends e{constructor(e,r,i){super(e,r,i),this.__truncationSuspended=!1;const o=this;let s;function a(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){const t=s-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),s=e.clientY}function u(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",u),a()}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",function(){const e=parseFloat(o.__input.value);n.isNaN(e)||o.setValue(e)}),t.bind(this.__input,"blur",function(){a()}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",u),s=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,a())}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),super.updateDisplay()}}}),e("skylark-datgui/controllers/NumberControllerSlider",["./NumberController","../dom/dom"],function(e,t){"use strict";function n(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}return class extends e{constructor(e,r,i,o,s){super(e,r,{min:i,max:o,step:s});const a=this;function l(e){e.preventDefault();const t=a.__background.getBoundingClientRect();return a.setValue(n(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function u(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(e){const t=e.touches[0].clientX,r=a.__background.getBoundingClientRect();a.setValue(n(t,r.left,r.right,a.__min,a.__max))}function f(){t.unbind(window,"touchmove",c),t.unbind(window,"touchend",f),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){document.activeElement.blur(),t.bind(window,"mousemove",l),t.bind(window,"mouseup",u),l(e)}),t.bind(this.__background,"touchstart",function(e){if(1!==e.touches.length)return;t.bind(window,"touchmove",c),t.bind(window,"touchend",f),c(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)}updateDisplay(){const e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",super.updateDisplay()}}}),e("skylark-datgui/controllers/FunctionController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n,r){super(e,n);const i=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,t.bind(this.__button,"click",function(e){return e.preventDefault(),i.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}fire(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}}),e("skylark-datgui/controllers/ColorController",["./Controller","../dom/dom"],function(e,t){"use strict";return class extends e{constructor(e,n){super(e,n);const r=this;function i(){r.setValue(r.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","color"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}updateDisplay(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),super.updateDisplay()}}}),e("skylark-datgui/utils/css",[],function(){"use strict";const e={load:function(e,t){const n=t||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){const n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;const i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}}};return e}),e("skylark-datgui/gui/saveDialogue.html",[],function(){"use strict";return`<div id="dg-save" class="dg dialogue">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`}),e("skylark-datgui/controllers/ControllerFactory",["./OptionController","./NumberControllerBox","./NumberControllerSlider","./StringController","./FunctionController","./BooleanController","../utils/common"],function(e,t,n,r,i,o,s){"use strict";return function(a,l){const u=a[l];if(s.isArray(arguments[2])||s.isObject(arguments[2]))return new e(a,l,arguments[2]);if(s.isNumber(u))return s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new n(a,l,arguments[2],arguments[3],arguments[4]):new n(a,l,arguments[2],arguments[3]):s.isNumber(arguments[4])?new t(a,l,{min:arguments[2],max:arguments[3],step:arguments[4]}):new t(a,l,{min:arguments[2],max:arguments[3]});if(s.isString(u))return new r(a,l);if(s.isFunction(u))return new i(a,l,"");if(s.isBoolean(u))return new o(a,l);return null}}),e("skylark-datgui/utils/requestAnimationFrame",[],function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}),e("skylark-datgui/dom/CenteredDiv",["../dom/dom","../utils/common"],function(e,t){"use strict";return class{constructor(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);const n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})}show(){const e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}hide(){const t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}layout(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"}}}),e("skylark-datgui/gui/GUI",["../utils/css","./saveDialogue.html","../controllers/ControllerFactory","../controllers/Controller","../controllers/BooleanController","../controllers/FunctionController","../controllers/NumberControllerBox","../controllers/NumberControllerSlider","../controllers/ColorController","../utils/requestAnimationFrame","../dom/CenteredDiv","../dom/dom","../utils/common"],function(e,t,n,r,i,o,s,a,l,u,c,f,d,h){"use strict";const p="Default",m=function(){try{return!!window.localStorage}catch(e){return!1}}();let g,y,v=!0,k=!1;const _=[],b=function(e){const t=this;let n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=d.defaults(n,{closeOnTop:!1,autoPlace:!0,width:b.DEFAULT_WIDTH}),n=d.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),d.isUndefined(n.load)?n.load={preset:p}:n.preset&&(n.load.preset=n.preset),d.isUndefined(n.parent)&&n.hideable&&_.push(this),n.resizable=d.isUndefined(n.parent)&&n.resizable,n.autoPlace&&d.isUndefined(n.scrollable)&&(n.scrollable=!0);let r,i,o=m&&"true"===localStorage.getItem(A(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:n.load.preset},set:function(e){t.parent?t.getRoot().preset=e:n.load.preset=e,function(e){for(let t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),t.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,L(t,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,i&&(i.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?f.addClass(t.__ul,b.CLASS_CLOSED):f.removeClass(t.__ul,b.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=e?b.TEXT_OPEN:b.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return o},set:function(e){m&&(o=e,e?f.bind(window,"unload",r):f.unbind(window,"unload",r),localStorage.setItem(A(t,"isLocal"),e))}}}),d.isUndefined(n.parent)){if(this.closed=n.closed||!1,f.addClass(this.domElement,b.CLASS_MAIN),f.makeSelectable(this.domElement,!1),m&&o){t.useLocalStorage=!0;const e=localStorage.getItem(A(this,"gui"));e&&(n.load=JSON.parse(e))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=b.TEXT_CLOSED,f.addClass(this.__closeButton,b.CLASS_CLOSE_BUTTON),n.closeOnTop?(f.addClass(this.__closeButton,b.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(f.addClass(this.__closeButton,b.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),f.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===n.closed&&(n.closed=!0);const e=document.createTextNode(n.name);f.addClass(e,"controller-name"),i=x(t,e);const r=function(e){return e.preventDefault(),t.closed=!t.closed,!1};f.addClass(this.__ul,b.CLASS_CLOSED),f.addClass(i,"title"),f.bind(i,"click",r),n.closed||(this.closed=!1)}n.autoPlace&&(d.isUndefined(n.parent)&&(v&&(y=document.createElement("div"),f.addClass(y,"dg"),f.addClass(y,b.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(y),v=!1),y.appendChild(this.domElement),f.addClass(this.domElement,b.CLASS_AUTO_PLACE)),this.parent||L(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},f.bind(window,"resize",this.__resizeHandler),f.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),f.bind(this.__ul,"transitionend",this.__resizeHandler),f.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function(e){let t;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){f.removeClass(e.__closeButton,b.CLASS_DRAG),f.unbind(window,"mousemove",n),f.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,f.addClass(e.__closeButton,b.CLASS_DRAG),f.bind(window,"mousemove",n),f.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),d.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),f.bind(e.__resize_handle,"mousedown",i),f.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),r=function(){m&&"true"===localStorage.getItem(A(t,"isLocal"))&&localStorage.setItem(A(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=r,n.parent||function(){const e=t.getRoot();e.width+=1,d.defer(function(){e.width-=1})}()};function x(e,t,n){const r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function w(e){f.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&f.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function C(e,t){const n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function E(e,t){const n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){let i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){const i=n.load.remembered;let o;if(i[e.preset])o=i[e.preset];else{if(!i[p])return;o=i[p]}if(o[r]&&void 0!==o[r][t.property]){const e=o[r][t.property];t.initialValue=e,t.setValue(e)}}}}function S(e,t,u,c){if(void 0===t[u])throw new Error(`Object "${t}" has no property "${u}"`);let h;if(c.color)h=new l(t,u);else{const r=[t,u].concat(c.factoryArgs);h=n.apply(e,r)}c.before instanceof r&&(c.before=c.before.__li),E(e,h),f.addClass(h.domElement,"c");const p=document.createElement("span");f.addClass(p,"property-name"),p.innerHTML=h.property;const m=document.createElement("div");m.appendChild(p),m.appendChild(h.domElement);const g=x(e,m,c.before);return f.addClass(g,b.CLASS_CONTROLLER_ROW),h instanceof l?f.addClass(g,"color"):f.addClass(g,typeof h.getValue()),function(e,t,n){if(n.__li=t,n.__gui=e,d.extend(n,{options:function(t){if(arguments.length>1){const t=n.__li.nextElementSibling;return n.remove(),S(e,n.object,n.property,{before:t,factoryArgs:[d.toArray(arguments)]})}if(d.isArray(t)||d.isObject(t)){const r=n.__li.nextElementSibling;return n.remove(),S(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof a){const e=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});d.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(t){const r=n[t],i=e[t];n[t]=e[t]=function(){const t=Array.prototype.slice.call(arguments);return i.apply(e,t),r.apply(n,t)}}),f.addClass(t,"has-slider"),n.domElement.insertBefore(e.domElement,n.domElement.firstElementChild)}else if(n instanceof s){const t=function(t){if(d.isNumber(n.__min)&&d.isNumber(n.__max)){const t=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();const i=S(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(t),r&&i.listen(),i}return t};n.min=d.compose(t,n.min),n.max=d.compose(t,n.max)}else n instanceof i?(f.bind(t,"click",function(){f.fakeEvent(n.__checkbox,"click")}),f.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof o?(f.bind(t,"click",function(){f.fakeEvent(n.__button,"click")}),f.bind(t,"mouseover",function(){f.addClass(n.__button,"hover")}),f.bind(t,"mouseout",function(){f.removeClass(n.__button,"hover")})):n instanceof l&&(f.addClass(t,"color"),n.updateDisplay=d.compose(function(e){return t.style.borderLeftColor=n.getValue(),e},n.updateDisplay),n.updateDisplay());n.setValue=d.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&C(e.getRoot(),!0),t},n.setValue)}(e,g,h),e.__controllers.push(h),h}function A(e,t){return document.location.href+"."+t}function O(e,t,n){const r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function T(e,t){t.style.display=e.useLocalStorage?"block":"none"}function L(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function N(e,t){const n={};return d.each(e.__rememberedObjects,function(r,i){const o={},s=e.__rememberedObjectIndecesToControllers[i];d.each(s,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}return b.toggleHide=function(){k=!k,d.each(_,function(e){e.domElement.style.display=k?"none":""})},b.CLASS_AUTO_PLACE="a",b.CLASS_AUTO_PLACE_CONTAINER="ac",b.CLASS_MAIN="main",b.CLASS_CONTROLLER_ROW="cr",b.CLASS_TOO_TALL="taller-than-window",b.CLASS_CLOSED="closed",b.CLASS_CLOSE_BUTTON="close-button",b.CLASS_CLOSE_TOP="close-top",b.CLASS_CLOSE_BOTTOM="close-bottom",b.CLASS_DRAG="drag",b.DEFAULT_WIDTH=245,b.TEXT_CLOSED="Close Controls",b.TEXT_OPEN="Open Controls",b._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||b.toggleHide()},f.bind(window,"keydown",b._keydownHandler,!1),d.extend(b.prototype,{add:function(e,t){return S(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return S(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);const t=this;d.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&y.removeChild(this.domElement);const e=this;d.each(this.__folders,function(t){e.removeFolder(t)}),f.unbind(window,"keydown",b._keydownHandler,!1),w(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');const t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);const n=new b(t);this.__folders[e]=n;const r=x(this,n.domElement);return f.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],w(e);const t=this;d.each(e.__folders,function(t){e.removeFolder(t)}),d.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){const e=this.getRoot();if(e.scrollable){const t=f.getOffset(e.__ul).top;let n=0;d.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=f.getHeight(t))}),window.innerHeight-t-20<n?(f.addClass(e.domElement,b.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(f.removeClass(e.domElement,b.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&d.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:d.debounce(function(){this.onResize()},50),remember:function(){if(d.isUndefined(g)&&((g=new c).domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");const e=this;d.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){const t=e.__save_row=document.createElement("li");f.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),f.addClass(t,"save-row");const n=document.createElement("span");n.innerHTML="&nbsp;",f.addClass(n,"button gears");const r=document.createElement("span");r.innerHTML="Save",f.addClass(r,"button"),f.addClass(r,"save");const i=document.createElement("span");i.innerHTML="New",f.addClass(i,"button"),f.addClass(i,"save-as");const o=document.createElement("span");o.innerHTML="Revert",f.addClass(o,"button"),f.addClass(o,"revert");const s=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?d.each(e.load.remembered,function(t,n){O(e,n,n===e.preset)}):O(e,p,!1);if(f.bind(s,"change",function(){for(let t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),m){const t=document.getElementById("dg-local-explain"),n=document.getElementById("dg-local-storage"),r=document.getElementById("dg-save-locally");r.style.display="block","true"===localStorage.getItem(A(e,"isLocal"))&&n.setAttribute("checked","checked"),T(e,t),f.bind(n,"change",function(){e.useLocalStorage=!e.useLocalStorage,T(e,t)})}const a=document.getElementById("dg-new-constructor");f.bind(a,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||g.hide()}),f.bind(n,"click",function(){a.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),g.show(),a.focus(),a.select()}),f.bind(r,"click",function(){e.save()}),f.bind(i,"click",function(){const t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),f.bind(o,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&L(this,this.width)},getRoot:function(){let e=this;for(;e.parent;)e=e.parent;return e},getSaveObject:function(){const e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=N(this)),e.folders={},d.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=N(this),C(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[p]=N(this,!0)),this.load.remembered[e]=N(this),this.preset=e,O(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){d.each(this.__controllers,function(t){this.getRoot().load.remembered?E(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),d.each(this.__folders,function(e){e.revert(e)}),e||C(this.getRoot(),!1)},listen:function(e){const t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&u.call(window,function(){e(t)});d.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){d.each(this.__controllers,function(e){e.updateDisplay()}),d.each(this.__folders,function(e){e.updateDisplay()})}}),b}),e("skylark-datgui/main",["skylark-langx-ns","./controllers/Controller","./controllers/BooleanController","./controllers/OptionController","./controllers/StringController","./controllers/NumberController","./controllers/NumberControllerBox","./controllers/NumberControllerSlider","./controllers/FunctionController","./controllers/ColorController","./dom/dom","./gui/GUI"],function(e,t,n,r,i,o,s,a,l,u,c,f){"use strict";const d={Controller:t,BooleanController:n,OptionController:r,StringController:i,NumberController:o,NumberControllerBox:s,NumberControllerSlider:a,FunctionController:l,ColorController:u},h={dom:c},p={GUI:f},m=f;return e.attach("intg.datgui",{controllers:d,dom:h,gui:p,GUI:m})}),e("skylark-datgui",["skylark-datgui/main"],function(e){return e})}(n,require),!r){var a=require("skylark-langx-ns");o?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-datgui-all.js.map
