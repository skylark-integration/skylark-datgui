{"version":3,"sources":["controllers/NumberControllerSlider.js"],"names":["define","NumberController","dom","map","v","i1","i2","o1","o2","[object Object]","object","property","min","max","step","super","_this","this","onMouseDrag","e","preventDefault","bgRect","__background","getBoundingClientRect","setValue","clientX","left","right","__min","__max","onMouseUp","unbind","window","__onFinishChange","call","getValue","onTouchMove","touches","onTouchEnd","document","createElement","__foreground","bind","activeElement","blur","length","addClass","updateDisplay","appendChild","domElement","pct","style","width"],"mappings":";;;;;;;AAAAA,QACI,qBACA,cACD,SAAUC,EAAkBC,GAC3B,aACA,SAASC,EAAIC,EAAGC,EAAIC,EAAIC,EAAIC,GACxB,OAAOD,GAAmBH,EAAIC,IAAOC,EAAKD,IAA7BG,EAAKD,GAiEtB,qBA/DqCN,EACjCQ,YAAYC,EAAQC,EAAUC,EAAKC,EAAKC,GACpCC,MAAML,EAAQC,GACVC,IAAKA,EACLC,IAAKA,EACLC,KAAMA,IAEV,MAAME,EAAQC,KAad,SAASC,EAAYC,GACjBA,EAAEC,iBACF,MAAMC,EAASL,EAAMM,aAAaC,wBAElC,OADAP,EAAMQ,SAASrB,EAAIgB,EAAEM,QAASJ,EAAOK,KAAML,EAAOM,MAAOX,EAAMY,MAAOZ,EAAMa,SACrE,EAEX,SAASC,IACL5B,EAAI6B,OAAOC,OAAQ,YAAad,GAChChB,EAAI6B,OAAOC,OAAQ,UAAWF,GAC1Bd,EAAMiB,kBACNjB,EAAMiB,iBAAiBC,KAAKlB,EAAOA,EAAMmB,YAWjD,SAASC,EAAYjB,GACjB,MAAMM,EAAUN,EAAEkB,QAAQ,GAAGZ,QACvBJ,EAASL,EAAMM,aAAaC,wBAClCP,EAAMQ,SAASrB,EAAIsB,EAASJ,EAAOK,KAAML,EAAOM,MAAOX,EAAMY,MAAOZ,EAAMa,QAE9E,SAASS,IACLpC,EAAI6B,OAAOC,OAAQ,YAAaI,GAChClC,EAAI6B,OAAOC,OAAQ,WAAYM,GAC3BtB,EAAMiB,kBACNjB,EAAMiB,iBAAiBC,KAAKlB,EAAOA,EAAMmB,YA1CjDlB,KAAKK,aAAeiB,SAASC,cAAc,OAC3CvB,KAAKwB,aAAeF,SAASC,cAAc,OAC3CtC,EAAIwC,KAAKzB,KAAKK,aAAc,YAI5B,SAAqBH,GACjBoB,SAASI,cAAcC,OACvB1C,EAAIwC,KAAKV,OAAQ,YAAad,GAC9BhB,EAAIwC,KAAKV,OAAQ,UAAWF,GAC5BZ,EAAYC,KAPhBjB,EAAIwC,KAAKzB,KAAKK,aAAc,aAsB5B,SAAsBH,GACO,IAArBA,EAAEkB,QAAQQ,SAGd3C,EAAIwC,KAAKV,OAAQ,YAAaI,GAC9BlC,EAAIwC,KAAKV,OAAQ,WAAYM,GAC7BF,EAAYjB,MA3BhBjB,EAAI4C,SAAS7B,KAAKK,aAAc,UAChCpB,EAAI4C,SAAS7B,KAAKwB,aAAc,aAwChCxB,KAAK8B,gBACL9B,KAAKK,aAAa0B,YAAY/B,KAAKwB,cACnCxB,KAAKgC,WAAWD,YAAY/B,KAAKK,cAErCb,gBACI,MAAMyC,GAAOjC,KAAKkB,WAAalB,KAAKW,QAAUX,KAAKY,MAAQZ,KAAKW,OAEhE,OADAX,KAAKwB,aAAaU,MAAMC,MAAc,IAANF,EAAY,IACrCnC,MAAMgC","file":"../../controllers/NumberControllerSlider.js","sourcesContent":["define([\n    './NumberController',\n    '../dom/dom'\n], function (NumberController, dom) {\n    'use strict';\n    function map(v, i1, i2, o1, o2) {\n        return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n    }\n    class NumberControllerSlider extends NumberController {\n        constructor(object, property, min, max, step) {\n            super(object, property, {\n                min: min,\n                max: max,\n                step: step\n            });\n            const _this = this;\n            this.__background = document.createElement('div');\n            this.__foreground = document.createElement('div');\n            dom.bind(this.__background, 'mousedown', onMouseDown);\n            dom.bind(this.__background, 'touchstart', onTouchStart);\n            dom.addClass(this.__background, 'slider');\n            dom.addClass(this.__foreground, 'slider-fg');\n            function onMouseDown(e) {\n                document.activeElement.blur();\n                dom.bind(window, 'mousemove', onMouseDrag);\n                dom.bind(window, 'mouseup', onMouseUp);\n                onMouseDrag(e);\n            }\n            function onMouseDrag(e) {\n                e.preventDefault();\n                const bgRect = _this.__background.getBoundingClientRect();\n                _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n                return false;\n            }\n            function onMouseUp() {\n                dom.unbind(window, 'mousemove', onMouseDrag);\n                dom.unbind(window, 'mouseup', onMouseUp);\n                if (_this.__onFinishChange) {\n                    _this.__onFinishChange.call(_this, _this.getValue());\n                }\n            }\n            function onTouchStart(e) {\n                if (e.touches.length !== 1) {\n                    return;\n                }\n                dom.bind(window, 'touchmove', onTouchMove);\n                dom.bind(window, 'touchend', onTouchEnd);\n                onTouchMove(e);\n            }\n            function onTouchMove(e) {\n                const clientX = e.touches[0].clientX;\n                const bgRect = _this.__background.getBoundingClientRect();\n                _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n            }\n            function onTouchEnd() {\n                dom.unbind(window, 'touchmove', onTouchMove);\n                dom.unbind(window, 'touchend', onTouchEnd);\n                if (_this.__onFinishChange) {\n                    _this.__onFinishChange.call(_this, _this.getValue());\n                }\n            }\n            this.updateDisplay();\n            this.__background.appendChild(this.__foreground);\n            this.domElement.appendChild(this.__background);\n        }\n        updateDisplay() {\n            const pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n            this.__foreground.style.width = pct * 100 + '%';\n            return super.updateDisplay();\n        }\n    }\n    return NumberControllerSlider;\n});"]}