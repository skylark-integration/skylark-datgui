{"version":3,"sources":["dom/dom.js"],"names":["define","common","EVENT_MAP_INV","each","HTMLEvents","MouseEvents","KeyboardEvents","v","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","isUndefined","match","isNull","parseFloat","dom","makeSelectable","elem","selectable","undefined","style","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","Error","evt","document","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","window","clickCount","init","initKeyboardEvent","initKeyEvent","defaults","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","bind","event","func","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","test","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href"],"mappings":"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","file":"../../dom/dom.js","sourcesContent":["define(['../utils/common'], function (common) {\n    'use strict';\n    const EVENT_MAP = {\n        HTMLEvents: ['change'],\n        MouseEvents: [\n            'click',\n            'mousemove',\n            'mousedown',\n            'mouseup',\n            'mouseover'\n        ],\n        KeyboardEvents: ['keydown']\n    };\n    const EVENT_MAP_INV = {};\n    common.each(EVENT_MAP, function (v, k) {\n        common.each(v, function (e) {\n            EVENT_MAP_INV[e] = k;\n        });\n    });\n    const CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n    function cssValueToPixels(val) {\n        if (val === '0' || common.isUndefined(val)) {\n            return 0;\n        }\n        const match = val.match(CSS_VALUE_PIXELS);\n        if (!common.isNull(match)) {\n            return parseFloat(match[1]);\n        }\n        return 0;\n    }\n    const dom = {\n        makeSelectable: function (elem, selectable) {\n            if (elem === undefined || elem.style === undefined)\n                return;\n            elem.onselectstart = selectable ? function () {\n                return false;\n            } : function () {\n            };\n            elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n            elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n            elem.unselectable = selectable ? 'on' : 'off';\n        },\n        makeFullscreen: function (elem, hor, vert) {\n            let vertical = vert;\n            let horizontal = hor;\n            if (common.isUndefined(horizontal)) {\n                horizontal = true;\n            }\n            if (common.isUndefined(vertical)) {\n                vertical = true;\n            }\n            elem.style.position = 'absolute';\n            if (horizontal) {\n                elem.style.left = 0;\n                elem.style.right = 0;\n            }\n            if (vertical) {\n                elem.style.top = 0;\n                elem.style.bottom = 0;\n            }\n        },\n        fakeEvent: function (elem, eventType, pars, aux) {\n            const params = pars || {};\n            const className = EVENT_MAP_INV[eventType];\n            if (!className) {\n                throw new Error('Event type ' + eventType + ' not supported.');\n            }\n            const evt = document.createEvent(className);\n            switch (className) {\n            case 'MouseEvents': {\n                    const clientX = params.x || params.clientX || 0;\n                    const clientY = params.y || params.clientY || 0;\n                    evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0, 0, clientX, clientY, false, false, false, false, 0, null);\n                    break;\n                }\n            case 'KeyboardEvents': {\n                    const init = evt.initKeyboardEvent || evt.initKeyEvent;\n                    common.defaults(params, {\n                        cancelable: true,\n                        ctrlKey: false,\n                        altKey: false,\n                        shiftKey: false,\n                        metaKey: false,\n                        keyCode: undefined,\n                        charCode: undefined\n                    });\n                    init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n                    break;\n                }\n            default: {\n                    evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n                    break;\n                }\n            }\n            common.defaults(evt, aux);\n            elem.dispatchEvent(evt);\n        },\n        bind: function (elem, event, func, newBool) {\n            const bool = newBool || false;\n            if (elem.addEventListener) {\n                elem.addEventListener(event, func, bool);\n            } else if (elem.attachEvent) {\n                elem.attachEvent('on' + event, func);\n            }\n            return dom;\n        },\n        unbind: function (elem, event, func, newBool) {\n            const bool = newBool || false;\n            if (elem.removeEventListener) {\n                elem.removeEventListener(event, func, bool);\n            } else if (elem.detachEvent) {\n                elem.detachEvent('on' + event, func);\n            }\n            return dom;\n        },\n        addClass: function (elem, className) {\n            if (elem.className === undefined) {\n                elem.className = className;\n            } else if (elem.className !== className) {\n                const classes = elem.className.split(/ +/);\n                if (classes.indexOf(className) === -1) {\n                    classes.push(className);\n                    elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n                }\n            }\n            return dom;\n        },\n        removeClass: function (elem, className) {\n            if (className) {\n                if (elem.className === className) {\n                    elem.removeAttribute('class');\n                } else {\n                    const classes = elem.className.split(/ +/);\n                    const index = classes.indexOf(className);\n                    if (index !== -1) {\n                        classes.splice(index, 1);\n                        elem.className = classes.join(' ');\n                    }\n                }\n            } else {\n                elem.className = undefined;\n            }\n            return dom;\n        },\n        hasClass: function (elem, className) {\n            return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n        },\n        getWidth: function (elem) {\n            const style = getComputedStyle(elem);\n            return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n        },\n        getHeight: function (elem) {\n            const style = getComputedStyle(elem);\n            return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n        },\n        getOffset: function (el) {\n            let elem = el;\n            const offset = {\n                left: 0,\n                top: 0\n            };\n            if (elem.offsetParent) {\n                do {\n                    offset.left += elem.offsetLeft;\n                    offset.top += elem.offsetTop;\n                    elem = elem.offsetParent;\n                } while (elem);\n            }\n            return offset;\n        },\n        isActive: function (elem) {\n            return elem === document.activeElement && (elem.type || elem.href);\n        }\n    };\n    return dom;\n});"]}